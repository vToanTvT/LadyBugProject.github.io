<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LadyBug Firmware Documentation: Comparator Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LadyBug Firmware Documentation<span id="projectnumber">&#160;v2.1</span>
   </div>
   <div id="projectbrief">Update data according main board hardware ver2.1</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group___d_r_v___c_o_m_p.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Comparator Driver <div class="ingroups"><a class="el" href="group___d_r_i_v_e_r___l_a_y_e_r.html">Driver Layer</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Comparator driver for hardware protection and monitoring.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Comparator Driver:</div>
<div class="dyncontent">
<div class="center"><img src="group___d_r_v___c_o_m_p.png" border="0" usemap="#agroup______d__r__v______c__o__m__p" loading="lazy" alt=""/></div>
<map name="agroup______d__r__v______c__o__m__p" id="agroup______d__r__v______c__o__m__p">
<area shape="rect" href="group___d_r_i_v_e_r___l_a_y_e_r.html" title="Hardware abstraction and low&#45;level peripheral drivers." alt="" coords="5,5,98,32"/>
<area shape="rect" title="Comparator driver for hardware protection and monitoring." alt="" coords="146,5,274,32"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:S_5FComp_5FTypeDef" id="r_S_5FComp_5FTypeDef"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s___comp___type_def.html">S_Comp_TypeDef</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Public macro definitions.  <a href="struct_s___comp___type_def.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4553469f3dfae5c9c1cb1d96f8fc5c97" id="r_ga4553469f3dfae5c9c1cb1d96f8fc5c97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4553469f3dfae5c9c1cb1d96f8fc5c97">comp_init_</a> ()</td></tr>
<tr class="memdesc:ga4553469f3dfae5c9c1cb1d96f8fc5c97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Comparator module.  <br /></td></tr>
<tr class="memitem:ga79780eab52f33a6dcb63d5e0a9703ec9" id="r_ga79780eab52f33a6dcb63d5e0a9703ec9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga79780eab52f33a6dcb63d5e0a9703ec9">comp_set_threshold_</a> (<a class="el" href="struct_s___comp___type_def.html">S_Comp_TypeDef</a> *pcomp)</td></tr>
<tr class="memdesc:ga79780eab52f33a6dcb63d5e0a9703ec9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set comparator threshold value.  <br /></td></tr>
<tr class="memitem:ga416d150f7c79ea1d9136122110b6334e" id="r_ga416d150f7c79ea1d9136122110b6334e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga416d150f7c79ea1d9136122110b6334e">comp_set_state_</a> (<a class="el" href="struct_s___comp___type_def.html">S_Comp_TypeDef</a> *pcomp)</td></tr>
<tr class="memdesc:ga416d150f7c79ea1d9136122110b6334e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set comparator state flag.  <br /></td></tr>
<tr class="memitem:ga65ec317dc45cf4d3e5c89735a6ae94ee" id="r_ga65ec317dc45cf4d3e5c89735a6ae94ee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga65ec317dc45cf4d3e5c89735a6ae94ee">comp_get_state_</a> (<a class="el" href="struct_s___comp___type_def.html">S_Comp_TypeDef</a> *pcomp)</td></tr>
<tr class="memdesc:ga65ec317dc45cf4d3e5c89735a6ae94ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read and update comparator state.  <br /></td></tr>
<tr class="memitem:ga127eaaf52bcbe81e23c9e2c1a3a2c20e" id="r_ga127eaaf52bcbe81e23c9e2c1a3a2c20e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga127eaaf52bcbe81e23c9e2c1a3a2c20e">comp_reset_protection</a> (<a class="el" href="struct_s___comp___type_def.html">S_Comp_TypeDef</a> *pcomp)</td></tr>
<tr class="memdesc:ga127eaaf52bcbe81e23c9e2c1a3a2c20e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset comparator protection system.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga0d289d33fd0727716659d14b126c27fc" id="r_ga0d289d33fd0727716659d14b126c27fc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_s___comp___type_def.html">S_Comp_TypeDef</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0d289d33fd0727716659d14b126c27fc">g_thisComp_ipri</a></td></tr>
<tr class="memdesc:ga0d289d33fd0727716659d14b126c27fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extern global variables for Comparator module.  <br /></td></tr>
<tr class="memitem:ga418305d1d14a3670de61398f6be368fb" id="r_ga418305d1d14a3670de61398f6be368fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_s___comp___type_def.html">S_Comp_TypeDef</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga418305d1d14a3670de61398f6be368fb">g_thisComp_ibat</a></td></tr>
<tr class="memitem:gaedf70672c75f0f7decf2d5d6f63c3676" id="r_gaedf70672c75f0f7decf2d5d6f63c3676"><td class="memItemLeft" align="right" valign="top">COMP_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaedf70672c75f0f7decf2d5d6f63c3676">hcomp3</a></td></tr>
<tr class="memitem:ga6fb8a2d03fc4de85aa0ab3df45c74561" id="r_ga6fb8a2d03fc4de85aa0ab3df45c74561"><td class="memItemLeft" align="right" valign="top">COMP_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6fb8a2d03fc4de85aa0ab3df45c74561">hcomp1</a></td></tr>
<tr class="memitem:gaa25a57382819e79fbde3687939c0fd0b" id="r_gaa25a57382819e79fbde3687939c0fd0b"><td class="memItemLeft" align="right" valign="top">DAC_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa25a57382819e79fbde3687939c0fd0b">hdac1</a></td></tr>
<tr class="memitem:gafa59c2f9ec039bb1637988969b75f6dc" id="r_gafa59c2f9ec039bb1637988969b75f6dc"><td class="memItemLeft" align="right" valign="top">COMP_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafa59c2f9ec039bb1637988969b75f6dc">comp</a></td></tr>
<tr class="memitem:ga0b57aa10271a66f3dc936bba1d2f3830" id="r_ga0b57aa10271a66f3dc936bba1d2f3830"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0b57aa10271a66f3dc936bba1d2f3830">state</a></td></tr>
<tr class="memitem:gaf6ba3377b9f5f09dbce8fd1e03c29e14" id="r_gaf6ba3377b9f5f09dbce8fd1e03c29e14"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf6ba3377b9f5f09dbce8fd1e03c29e14">comp_threshold</a></td></tr>
<tr class="memitem:gaa3a277706860b684ceb66e6edbaddf4f" id="r_gaa3a277706860b684ceb66e6edbaddf4f"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaa3a277706860b684ceb66e6edbaddf4f">channel_dac</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-member-group" class="groupheader"><a id="member-group" name="member-group"></a>
Comparator Configuration</h2></td></tr>
<tr><td class="ititle" colspan="2"><p>Include required header files.</p>
<p>Public constant definitions for Comparator module. </p>
</td></tr>
<tr class="memitem:ga868d87bf25b6772ca70fc5473ff79b19" id="r_ga868d87bf25b6772ca70fc5473ff79b19"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga868d87bf25b6772ca70fc5473ff79b19">hdac</a>&#160;&#160;&#160;<a class="el" href="#gaa25a57382819e79fbde3687939c0fd0b">hdac1</a></td></tr>
<tr class="memitem:ga89b4667ca4bf6d545702fa1beb42029d" id="r_ga89b4667ca4bf6d545702fa1beb42029d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga89b4667ca4bf6d545702fa1beb42029d">hcomp_ipri</a>&#160;&#160;&#160;<a class="el" href="#gaedf70672c75f0f7decf2d5d6f63c3676">hcomp3</a></td></tr>
<tr class="memitem:gac02e2e0e802e19a784633d925f6cc68c" id="r_gac02e2e0e802e19a784633d925f6cc68c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac02e2e0e802e19a784633d925f6cc68c">hcomp_ibat</a>&#160;&#160;&#160;<a class="el" href="#ga6fb8a2d03fc4de85aa0ab3df45c74561">hcomp1</a></td></tr>
<tr class="memitem:ga3d14f94e16dbbdfb04ee2881763345d6" id="r_ga3d14f94e16dbbdfb04ee2881763345d6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga3d14f94e16dbbdfb04ee2881763345d6">userDAC_ipri</a>&#160;&#160;&#160;DAC_CHANNEL_1</td></tr>
<tr class="memitem:ga8b13d7b3bd90be44b0444c7451e87ca7" id="r_ga8b13d7b3bd90be44b0444c7451e87ca7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8b13d7b3bd90be44b0444c7451e87ca7">userDAC_ibat</a>&#160;&#160;&#160;DAC_CHANNEL_2</td></tr>
<tr class="memitem:ga8017ca7c26da815eeaa5af291eefced5" id="r_ga8017ca7c26da815eeaa5af291eefced5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8017ca7c26da815eeaa5af291eefced5">COMP_THRESHOLD_IPRI</a>&#160;&#160;&#160;4000</td></tr>
<tr class="memitem:ga6d88acb685a9e51d4d1c6dfdfe322ad1" id="r_ga6d88acb685a9e51d4d1c6dfdfe322ad1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6d88acb685a9e51d4d1c6dfdfe322ad1">COMP_THRESHOLD_IBAT</a>&#160;&#160;&#160;1490</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p>Comparator driver for hardware protection and monitoring. </p>
<p>This file implements the initialization and main process logic of the Comparator Driver module. It provides core functions for hardware comparator configuration, DAC-based threshold control, state monitoring, and protection reset functionality. The module manages overcurrent protection for primary (IPRI) and battery (IBAT) circuits using hardware comparators with configurable voltage thresholds.</p>
<dl class="section version"><dt>Version</dt><dd>1.0.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>March 31, 2025 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>EVSELab Co. Jsc.</dd></dl>
<p>This module provides functions for comparator initialization, threshold configuration via DAC, state management, and protection reset. It manages hardware comparators for current monitoring of primary (IPRI) and battery (IBAT) circuits with configurable thresholds for overcurrent protection.</p>
<dl class="section version"><dt>Version</dt><dd>1.0.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>March 31, 2025 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>EVSELab Co. Jsc. </dd></dl>
<a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="ga6d88acb685a9e51d4d1c6dfdfe322ad1" name="ga6d88acb685a9e51d4d1c6dfdfe322ad1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6d88acb685a9e51d4d1c6dfdfe322ad1">&#9670;&#160;</a></span>COMP_THRESHOLD_IBAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMP_THRESHOLD_IBAT&#160;&#160;&#160;1490</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Battery current threshold: (1490/4096*3.3)/3.3*65535/(0.003*20*4096/3.3*2^4) = 20A </p>

</div>
</div>
<a id="ga8017ca7c26da815eeaa5af291eefced5" name="ga8017ca7c26da815eeaa5af291eefced5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8017ca7c26da815eeaa5af291eefced5">&#9670;&#160;</a></span>COMP_THRESHOLD_IPRI</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMP_THRESHOLD_IPRI&#160;&#160;&#160;4000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Primary current threshold: (3100/(2^12)*3.3)=2.5V--&gt;2.5V/3.3*19.7625=15A </p>

</div>
</div>
<a id="gac02e2e0e802e19a784633d925f6cc68c" name="gac02e2e0e802e19a784633d925f6cc68c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac02e2e0e802e19a784633d925f6cc68c">&#9670;&#160;</a></span>hcomp_ibat</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define hcomp_ibat&#160;&#160;&#160;<a class="el" href="#ga6fb8a2d03fc4de85aa0ab3df45c74561">hcomp1</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga89b4667ca4bf6d545702fa1beb42029d" name="ga89b4667ca4bf6d545702fa1beb42029d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga89b4667ca4bf6d545702fa1beb42029d">&#9670;&#160;</a></span>hcomp_ipri</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define hcomp_ipri&#160;&#160;&#160;<a class="el" href="#gaedf70672c75f0f7decf2d5d6f63c3676">hcomp3</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga868d87bf25b6772ca70fc5473ff79b19" name="ga868d87bf25b6772ca70fc5473ff79b19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga868d87bf25b6772ca70fc5473ff79b19">&#9670;&#160;</a></span>hdac</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define hdac&#160;&#160;&#160;<a class="el" href="#gaa25a57382819e79fbde3687939c0fd0b">hdac1</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga8b13d7b3bd90be44b0444c7451e87ca7" name="ga8b13d7b3bd90be44b0444c7451e87ca7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8b13d7b3bd90be44b0444c7451e87ca7">&#9670;&#160;</a></span>userDAC_ibat</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define userDAC_ibat&#160;&#160;&#160;DAC_CHANNEL_2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga3d14f94e16dbbdfb04ee2881763345d6" name="ga3d14f94e16dbbdfb04ee2881763345d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3d14f94e16dbbdfb04ee2881763345d6">&#9670;&#160;</a></span>userDAC_ipri</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define userDAC_ipri&#160;&#160;&#160;DAC_CHANNEL_1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ga65ec317dc45cf4d3e5c89735a6ae94ee" name="ga65ec317dc45cf4d3e5c89735a6ae94ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga65ec317dc45cf4d3e5c89735a6ae94ee">&#9670;&#160;</a></span>comp_get_state_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int comp_get_state_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s___comp___type_def.html">S_Comp_TypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>pcomp</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read and update comparator state. </p>
<p>Reads the hardware comparator output level and updates the state flag if the output is HIGH (threshold exceeded). This function only sets the state flag, it does not reset it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pcomp</td><td>Pointer to <a class="el" href="struct_s___comp___type_def.html" title="Public macro definitions.">S_Comp_TypeDef</a> structure that will be updated with current comparator status.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>State read successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Invalid parameter (NULL pointer).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function only sets the state to SET when threshold is exceeded. It does not automatically reset the state flag.</dd></dl>
<p>Read and update comparator state.</p>
<p>Reads the hardware comparator output level and updates the state flag if the output is HIGH (indicating threshold exceeded). This function checks the actual comparator hardware status and sets the software state flag accordingly.</p>
<p>Important: This function only sets the state to SET when the threshold is exceeded. It does not reset the state flag when the comparator output returns to LOW. State clearing must be done explicitly via <a class="el" href="#ga127eaaf52bcbe81e23c9e2c1a3a2c20e" title="Reset comparator protection system.">comp_reset_protection()</a> or manual reset.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pcomp</td><td>Pointer to <a class="el" href="struct_s___comp___type_def.html" title="Public macro definitions.">S_Comp_TypeDef</a> structure that will be updated with current hardware comparator status.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>State read and updated successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Invalid parameter (NULL pointer).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function should be called periodically to monitor comparator status. The state flag is latched (stays SET) until explicitly cleared by protection reset. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___d_r_v___c_o_m_p_ga65ec317dc45cf4d3e5c89735a6ae94ee_cgraph.png" border="0" usemap="#agroup___d_r_v___c_o_m_p_ga65ec317dc45cf4d3e5c89735a6ae94ee_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___d_r_v___c_o_m_p_ga65ec317dc45cf4d3e5c89735a6ae94ee_cgraph" id="agroup___d_r_v___c_o_m_p_ga65ec317dc45cf4d3e5c89735a6ae94ee_cgraph">
<area shape="rect" title="Read and update comparator state." alt="" coords="5,5,127,32"/>
<area shape="rect" href="group___d_r_v___c_o_m_p.html#ga416d150f7c79ea1d9136122110b6334e" title="Set comparator state flag to SET." alt="" coords="175,5,296,32"/>
<area shape="poly" title=" " alt="" coords="127,16,159,16,159,21,127,21"/>
</map>
</div>

</div>
</div>
<a id="ga4553469f3dfae5c9c1cb1d96f8fc5c97" name="ga4553469f3dfae5c9c1cb1d96f8fc5c97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4553469f3dfae5c9c1cb1d96f8fc5c97">&#9670;&#160;</a></span>comp_init_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int comp_init_ </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Comparator module. </p>
<p>Initializes both primary and battery comparators with their respective thresholds, starts DAC outputs, and activates comparator hardware for overcurrent protection monitoring.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>Initialization completed successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Hardware initialization error.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Must be called once during system startup before enabling power conversion. Configures hardware protection for both IPRI and IBAT.</dd></dl>
<p>Performs complete initialization of comparator protection system:</p><ul>
<li>Configures primary and battery comparator structures</li>
<li>Starts DAC outputs for threshold generation</li>
<li>Sets threshold voltages via DAC</li>
<li>Activates hardware comparators for monitoring</li>
</ul>
<p>Currently, only battery comparator (IBAT) is active. Primary comparator (IPRI) configuration is commented out but preserved for future use.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>Initialization completed successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Hardware initialization error.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Must be called once during system startup before enabling power conversion. This function configures hardware protection for overcurrent detection. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___d_r_v___c_o_m_p_ga4553469f3dfae5c9c1cb1d96f8fc5c97_cgraph.png" border="0" usemap="#agroup___d_r_v___c_o_m_p_ga4553469f3dfae5c9c1cb1d96f8fc5c97_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___d_r_v___c_o_m_p_ga4553469f3dfae5c9c1cb1d96f8fc5c97_cgraph" id="agroup___d_r_v___c_o_m_p_ga4553469f3dfae5c9c1cb1d96f8fc5c97_cgraph">
<area shape="rect" title="Initialize Comparator module." alt="" coords="5,5,90,32"/>
<area shape="rect" href="group___d_r_v___c_o_m_p.html#ga79780eab52f33a6dcb63d5e0a9703ec9" title="Set comparator threshold value." alt="" coords="138,5,283,32"/>
<area shape="poly" title=" " alt="" coords="90,16,122,16,122,21,90,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___d_r_v___c_o_m_p_ga4553469f3dfae5c9c1cb1d96f8fc5c97_icgraph.png" border="0" usemap="#agroup___d_r_v___c_o_m_p_ga4553469f3dfae5c9c1cb1d96f8fc5c97_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___d_r_v___c_o_m_p_ga4553469f3dfae5c9c1cb1d96f8fc5c97_icgraph" id="agroup___d_r_v___c_o_m_p_ga4553469f3dfae5c9c1cb1d96f8fc5c97_icgraph">
<area shape="rect" title="Initialize Comparator module." alt="" coords="1101,31,1186,57"/>
<area shape="rect" href="group___d_r_v___c_o_m_p.html#ga127eaaf52bcbe81e23c9e2c1a3a2c20e" title="Reset and reinitialize comparator protection system." alt="" coords="896,5,1049,32"/>
<area shape="poly" title=" " alt="" coords="1086,38,1049,33,1050,27,1086,33"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#ga92575d106e9621cd83364e7921c16842" title="Global function implementations." alt="" coords="891,56,1053,83"/>
<area shape="poly" title=" " alt="" coords="1086,55,1054,60,1054,55,1085,50"/>
<area shape="rect" href="group___m_i_d___f_a_u_l_t___m_a_n_a_g_e_m_e_n_t.html#ga8ad70d1197990240e6cbb899640152fa" title="Enter fault standby/reset state." alt="" coords="737,5,843,32"/>
<area shape="poly" title=" " alt="" coords="880,21,843,21,843,16,880,16"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gafc5058be8e5904fe82c000699ae798d8" title="Update EVSE state machine." alt="" coords="592,5,689,32"/>
<area shape="poly" title=" " alt="" coords="721,21,689,21,689,16,721,16"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#ga8a7c85b9c345204d44030fb96316a5eb" title="EVSE application processing handler." alt="" coords="365,5,544,32"/>
<area shape="poly" title=" " alt="" coords="577,21,545,21,545,16,577,16"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#ga45b2b0ff3f21c7abe00874a5057a0efd" title="Main interrupt service routine for real&#45;time control." alt="" coords="142,5,317,32"/>
<area shape="poly" title=" " alt="" coords="350,21,318,21,318,16,350,16"/>
<area shape="rect" href="main_8c.html#a4665d4e1d5fea2d34089d4e50a763751" title=" " alt="" coords="5,5,94,32"/>
<area shape="poly" title=" " alt="" coords="126,21,94,21,94,16,126,16"/>
<area shape="rect" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="765,56,814,83"/>
<area shape="poly" title=" " alt="" coords="876,72,815,72,815,67,876,67"/>
</map>
</div>

</div>
</div>
<a id="ga127eaaf52bcbe81e23c9e2c1a3a2c20e" name="ga127eaaf52bcbe81e23c9e2c1a3a2c20e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga127eaaf52bcbe81e23c9e2c1a3a2c20e">&#9670;&#160;</a></span>comp_reset_protection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int comp_reset_protection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s___comp___type_def.html">S_Comp_TypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>pcomp</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset comparator protection system. </p>
<p>Stops the comparator, reinitializes the protection configuration, and restarts monitoring. Used to recover from fault conditions or to restart protection after intentional disable.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pcomp</td><td>Pointer to <a class="el" href="struct_s___comp___type_def.html" title="Public macro definitions.">S_Comp_TypeDef</a> structure to be reset and reinitialized.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>Protection reset successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Invalid parameter (NULL pointer).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function stops the comparator hardware, calls <a class="el" href="#ga4553469f3dfae5c9c1cb1d96f8fc5c97" title="Initialize Comparator module.">comp_init_()</a> to reconfigure, and restarts protection monitoring.</dd></dl>
<p>Reset comparator protection system.</p>
<p>Stops the comparator hardware, reinitializes the complete protection configuration, and restarts monitoring. This function is typically used to restore the comparator to its default protection state after a fault condition, error event, or intentional disable. It performs a complete reset cycle including stopping hardware, reconfiguring structures, and restarting.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pcomp</td><td>Pointer to <a class="el" href="struct_s___comp___type_def.html" title="Public macro definitions.">S_Comp_TypeDef</a> structure to be reset and reinitialized.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>Protection reset and reinitialized successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Invalid parameter (NULL pointer).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function stops the comparator hardware using HAL_COMP_Stop(), then calls <a class="el" href="#ga4553469f3dfae5c9c1cb1d96f8fc5c97" title="Initialize Comparator module.">comp_init_()</a> to perform complete reconfiguration. After calling this function, the comparator will be active and monitoring again with default thresholds. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___d_r_v___c_o_m_p_ga127eaaf52bcbe81e23c9e2c1a3a2c20e_cgraph.png" border="0" usemap="#agroup___d_r_v___c_o_m_p_ga127eaaf52bcbe81e23c9e2c1a3a2c20e_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___d_r_v___c_o_m_p_ga127eaaf52bcbe81e23c9e2c1a3a2c20e_cgraph" id="agroup___d_r_v___c_o_m_p_ga127eaaf52bcbe81e23c9e2c1a3a2c20e_cgraph">
<area shape="rect" title="Reset comparator protection system." alt="" coords="5,5,159,32"/>
<area shape="rect" href="group___d_r_v___c_o_m_p.html#ga4553469f3dfae5c9c1cb1d96f8fc5c97" title="Initialize Comparator module." alt="" coords="207,5,291,32"/>
<area shape="poly" title=" " alt="" coords="159,16,191,16,191,21,159,21"/>
<area shape="rect" href="group___d_r_v___c_o_m_p.html#ga79780eab52f33a6dcb63d5e0a9703ec9" title="Set comparator threshold value." alt="" coords="339,5,484,32"/>
<area shape="poly" title=" " alt="" coords="291,16,324,16,324,21,291,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___d_r_v___c_o_m_p_ga127eaaf52bcbe81e23c9e2c1a3a2c20e_icgraph.png" border="0" usemap="#agroup___d_r_v___c_o_m_p_ga127eaaf52bcbe81e23c9e2c1a3a2c20e_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___d_r_v___c_o_m_p_ga127eaaf52bcbe81e23c9e2c1a3a2c20e_icgraph" id="agroup___d_r_v___c_o_m_p_ga127eaaf52bcbe81e23c9e2c1a3a2c20e_icgraph">
<area shape="rect" title="Reset comparator protection system." alt="" coords="891,5,1044,32"/>
<area shape="rect" href="group___m_i_d___f_a_u_l_t___m_a_n_a_g_e_m_e_n_t.html#ga8ad70d1197990240e6cbb899640152fa" title="Enter fault standby/reset state." alt="" coords="737,5,843,32"/>
<area shape="poly" title=" " alt="" coords="876,21,843,21,843,16,876,16"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gafc5058be8e5904fe82c000699ae798d8" title="Update EVSE state machine." alt="" coords="592,5,689,32"/>
<area shape="poly" title=" " alt="" coords="721,21,689,21,689,16,721,16"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#ga8a7c85b9c345204d44030fb96316a5eb" title="EVSE application processing handler." alt="" coords="365,5,544,32"/>
<area shape="poly" title=" " alt="" coords="577,21,545,21,545,16,577,16"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#ga45b2b0ff3f21c7abe00874a5057a0efd" title="Main interrupt service routine for real&#45;time control." alt="" coords="142,5,317,32"/>
<area shape="poly" title=" " alt="" coords="350,21,318,21,318,16,350,16"/>
<area shape="rect" href="main_8c.html#a4665d4e1d5fea2d34089d4e50a763751" title=" " alt="" coords="5,5,94,32"/>
<area shape="poly" title=" " alt="" coords="126,21,94,21,94,16,126,16"/>
</map>
</div>

</div>
</div>
<a id="ga416d150f7c79ea1d9136122110b6334e" name="ga416d150f7c79ea1d9136122110b6334e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga416d150f7c79ea1d9136122110b6334e">&#9670;&#160;</a></span>comp_set_state_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int comp_set_state_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s___comp___type_def.html">S_Comp_TypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>pcomp</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set comparator state flag. </p>
<p>Marks the comparator state as SET, indicating that the threshold has been exceeded. Used internally to track fault conditions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pcomp</td><td>Pointer to <a class="el" href="struct_s___comp___type_def.html" title="Public macro definitions.">S_Comp_TypeDef</a> structure whose state will be set.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>State updated successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Invalid parameter (NULL pointer).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function does not interact with hardware, only updates the software state flag for tracking purposes.</dd></dl>
<p>Set comparator state flag.</p>
<p>Marks the comparator state flag as SET, indicating that the threshold has been exceeded. This function updates only the software state flag for tracking and does not interact with hardware. Used internally to maintain fault status.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pcomp</td><td>Pointer to <a class="el" href="struct_s___comp___type_def.html" title="Public macro definitions.">S_Comp_TypeDef</a> structure whose state flag will be set.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>State updated successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Invalid parameter (NULL pointer).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function does not interact with comparator hardware, it only updates the software state flag. The state must be manually cleared if needed, typically via <a class="el" href="#ga127eaaf52bcbe81e23c9e2c1a3a2c20e" title="Reset comparator protection system.">comp_reset_protection()</a>. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___d_r_v___c_o_m_p_ga416d150f7c79ea1d9136122110b6334e_icgraph.png" border="0" usemap="#agroup___d_r_v___c_o_m_p_ga416d150f7c79ea1d9136122110b6334e_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___d_r_v___c_o_m_p_ga416d150f7c79ea1d9136122110b6334e_icgraph" id="agroup___d_r_v___c_o_m_p_ga416d150f7c79ea1d9136122110b6334e_icgraph">
<area shape="rect" title="Set comparator state flag." alt="" coords="175,5,296,32"/>
<area shape="rect" href="group___d_r_v___c_o_m_p.html#ga65ec317dc45cf4d3e5c89735a6ae94ee" title="Read and update comparator state from hardware." alt="" coords="5,5,127,32"/>
<area shape="poly" title=" " alt="" coords="159,21,127,21,127,16,159,16"/>
</map>
</div>

</div>
</div>
<a id="ga79780eab52f33a6dcb63d5e0a9703ec9" name="ga79780eab52f33a6dcb63d5e0a9703ec9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga79780eab52f33a6dcb63d5e0a9703ec9">&#9670;&#160;</a></span>comp_set_threshold_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int comp_set_threshold_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s___comp___type_def.html">S_Comp_TypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>pcomp</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set comparator threshold value. </p>
<p>Updates the DAC output voltage to set a new comparator threshold. The threshold is a 12-bit value representing the voltage level at which the comparator will trigger.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pcomp</td><td>Pointer to <a class="el" href="struct_s___comp___type_def.html" title="Public macro definitions.">S_Comp_TypeDef</a> structure containing threshold value and DAC channel configuration.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>Threshold updated successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Invalid parameter (NULL pointer).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The threshold value should be calculated based on the desired trigger current and sensor characteristics.</dd></dl>
<p>Updates the DAC output voltage to configure a new comparator threshold. The DAC generates an analog voltage that serves as the reference for the hardware comparator. The threshold is a 12-bit value (0-4095) representing the voltage level at which the comparator will trigger (0V to 3.3V reference).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pcomp</td><td>Pointer to <a class="el" href="struct_s___comp___type_def.html" title="Public macro definitions.">S_Comp_TypeDef</a> structure containing the threshold value and DAC channel configuration.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>Threshold updated successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Invalid parameter (NULL pointer).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The threshold value should be calculated based on the desired trigger current, sensor characteristics, and amplification. The DAC is configured for 12-bit right-aligned mode. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___d_r_v___c_o_m_p_ga79780eab52f33a6dcb63d5e0a9703ec9_icgraph.png" border="0" usemap="#agroup___d_r_v___c_o_m_p_ga79780eab52f33a6dcb63d5e0a9703ec9_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___d_r_v___c_o_m_p_ga79780eab52f33a6dcb63d5e0a9703ec9_icgraph" id="agroup___d_r_v___c_o_m_p_ga79780eab52f33a6dcb63d5e0a9703ec9_icgraph">
<area shape="rect" title="Set comparator threshold value." alt="" coords="1234,31,1379,57"/>
<area shape="rect" href="group___d_r_v___c_o_m_p.html#ga4553469f3dfae5c9c1cb1d96f8fc5c97" title="Initialize Comparator module." alt="" coords="1101,31,1186,57"/>
<area shape="poly" title=" " alt="" coords="1218,47,1186,47,1186,41,1218,41"/>
<area shape="rect" href="group___d_r_v___c_o_m_p.html#ga127eaaf52bcbe81e23c9e2c1a3a2c20e" title="Reset and reinitialize comparator protection system." alt="" coords="896,5,1049,32"/>
<area shape="poly" title=" " alt="" coords="1086,38,1049,33,1050,27,1086,33"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#ga92575d106e9621cd83364e7921c16842" title="Global function implementations." alt="" coords="891,56,1053,83"/>
<area shape="poly" title=" " alt="" coords="1086,55,1054,60,1054,55,1085,50"/>
<area shape="rect" href="group___m_i_d___f_a_u_l_t___m_a_n_a_g_e_m_e_n_t.html#ga8ad70d1197990240e6cbb899640152fa" title="Enter fault standby/reset state." alt="" coords="737,5,843,32"/>
<area shape="poly" title=" " alt="" coords="880,21,843,21,843,16,880,16"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gafc5058be8e5904fe82c000699ae798d8" title="Update EVSE state machine." alt="" coords="592,5,689,32"/>
<area shape="poly" title=" " alt="" coords="721,21,689,21,689,16,721,16"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#ga8a7c85b9c345204d44030fb96316a5eb" title="EVSE application processing handler." alt="" coords="365,5,544,32"/>
<area shape="poly" title=" " alt="" coords="577,21,545,21,545,16,577,16"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#ga45b2b0ff3f21c7abe00874a5057a0efd" title="Main interrupt service routine for real&#45;time control." alt="" coords="142,5,317,32"/>
<area shape="poly" title=" " alt="" coords="350,21,318,21,318,16,350,16"/>
<area shape="rect" href="main_8c.html#a4665d4e1d5fea2d34089d4e50a763751" title=" " alt="" coords="5,5,94,32"/>
<area shape="poly" title=" " alt="" coords="126,21,94,21,94,16,126,16"/>
<area shape="rect" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="765,56,814,83"/>
<area shape="poly" title=" " alt="" coords="876,72,815,72,815,67,876,67"/>
</map>
</div>

</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="gaa3a277706860b684ceb66e6edbaddf4f" name="gaa3a277706860b684ceb66e6edbaddf4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa3a277706860b684ceb66e6edbaddf4f">&#9670;&#160;</a></span>channel_dac</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t channel_dac</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DAC channel used for threshold voltage generation </p>

</div>
</div>
<a id="gafa59c2f9ec039bb1637988969b75f6dc" name="gafa59c2f9ec039bb1637988969b75f6dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafa59c2f9ec039bb1637988969b75f6dc">&#9670;&#160;</a></span>comp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">COMP_HandleTypeDef comp</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>STM32 HAL comparator handle for hardware interface </p>

</div>
</div>
<a id="gaf6ba3377b9f5f09dbce8fd1e03c29e14" name="gaf6ba3377b9f5f09dbce8fd1e03c29e14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf6ba3377b9f5f09dbce8fd1e03c29e14">&#9670;&#160;</a></span>comp_threshold</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t comp_threshold</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Digital threshold value (12-bit DAC value) </p>

</div>
</div>
<a id="ga418305d1d14a3670de61398f6be368fb" name="ga418305d1d14a3670de61398f6be368fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga418305d1d14a3670de61398f6be368fb">&#9670;&#160;</a></span>g_thisComp_ibat</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_s___comp___type_def.html">S_Comp_TypeDef</a> g_thisComp_ibat</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga0d289d33fd0727716659d14b126c27fc" name="ga0d289d33fd0727716659d14b126c27fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0d289d33fd0727716659d14b126c27fc">&#9670;&#160;</a></span>g_thisComp_ipri</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_s___comp___type_def.html">S_Comp_TypeDef</a> g_thisComp_ipri</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extern global variables for Comparator module. </p>
<p>Extern global variables for Comparator module.</p>
<dl class="section note"><dt>Note</dt><dd>Use prefix g_ for global module-level variables. </dd></dl>

</div>
</div>
<a id="ga6fb8a2d03fc4de85aa0ab3df45c74561" name="ga6fb8a2d03fc4de85aa0ab3df45c74561"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6fb8a2d03fc4de85aa0ab3df45c74561">&#9670;&#160;</a></span>hcomp1</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">COMP_HandleTypeDef hcomp1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="gaedf70672c75f0f7decf2d5d6f63c3676" name="gaedf70672c75f0f7decf2d5d6f63c3676"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaedf70672c75f0f7decf2d5d6f63c3676">&#9670;&#160;</a></span>hcomp3</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">COMP_HandleTypeDef hcomp3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="gaa25a57382819e79fbde3687939c0fd0b" name="gaa25a57382819e79fbde3687939c0fd0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa25a57382819e79fbde3687939c0fd0b">&#9670;&#160;</a></span>hdac1</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DAC_HandleTypeDef hdac1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ga0b57aa10271a66f3dc936bba1d2f3830" name="ga0b57aa10271a66f3dc936bba1d2f3830"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0b57aa10271a66f3dc936bba1d2f3830">&#9670;&#160;</a></span>state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t state</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Current state of comparator (SET when threshold exceeded) </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
