<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LadyBug Firmware Documentation: Peripheral Middleware</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LadyBug Firmware Documentation<span id="projectnumber">&#160;v2.1</span>
   </div>
   <div id="projectbrief">Update data according main board hardware ver2.1</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group___m_i_d___p_e_r_i_p_h_e_r_a_l.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Peripheral Middleware <div class="ingroups"><a class="el" href="group___m_i_d_d_l_e_w_a_r_e___l_a_y_e_r.html">Middleware Layer</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Board peripheral control (relays, fan, VCOMP).  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Peripheral Middleware:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l.png" border="0" usemap="#agroup______m__i__d______p__e__r__i__p__h__e__r__a__l" loading="lazy" alt=""/></div>
<map name="agroup______m__i__d______p__e__r__i__p__h__e__r__a__l" id="agroup______m__i__d______p__e__r__i__p__h__e__r__a__l">
<area shape="rect" href="group___m_i_d_d_l_e_w_a_r_e___l_a_y_e_r.html" title="Control logic and system services." alt="" coords="5,5,129,32"/>
<area shape="rect" title="Board peripheral control (relays, fan, VCOMP)." alt="" coords="177,5,326,32"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:S_5FFAN" id="r_S_5FFAN"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s___f_a_n.html">S_FAN</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Public macro definitions.  <a href="struct_s___f_a_n.html#details">More...</a><br /></td></tr>
<tr class="memitem:S_5FFan_5FUpdateTypeDef" id="r_S_5FFan_5FUpdateTypeDef"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s___fan___update_type_def.html">S_Fan_UpdateTypeDef</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fan update control structure.  <a href="struct_s___fan___update_type_def.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga8abb85394abb52683a88a5c813a1dbb5" id="r_ga8abb85394abb52683a88a5c813a1dbb5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8abb85394abb52683a88a5c813a1dbb5">DUTY_FAN_LOW_POWER</a>&#160;&#160;&#160;20</td></tr>
<tr class="memdesc:ga8abb85394abb52683a88a5c813a1dbb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Include required header files.  <br /></td></tr>
<tr class="memitem:ga08472d44e87b231eec74b2083c2c0b4a" id="r_ga08472d44e87b231eec74b2083c2c0b4a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga08472d44e87b231eec74b2083c2c0b4a">DUTY_FAN_HIGH_POWER</a>&#160;&#160;&#160;80</td></tr>
<tr class="memitem:gae7237291e5dd904b9eeeb466dd59fb19" id="r_gae7237291e5dd904b9eeeb466dd59fb19"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae7237291e5dd904b9eeeb466dd59fb19">TEMP_THRESHOLD_HIGH</a>&#160;&#160;&#160;65</td></tr>
<tr class="memitem:ga37aea109a37b3e252e89be6ef84df8a6" id="r_ga37aea109a37b3e252e89be6ef84df8a6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga37aea109a37b3e252e89be6ef84df8a6">TEMP_THRESHOLD_LOW</a>&#160;&#160;&#160;40</td></tr>
<tr class="memitem:gab9ca9a982130be9d54fb6d136e770965" id="r_gab9ca9a982130be9d54fb6d136e770965"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab9ca9a982130be9d54fb6d136e770965">VAC_THRESHOLD_LOW</a>&#160;&#160;&#160;120</td></tr>
<tr class="memitem:ga4e9ba87c356963e57006b8f3e5a6e812" id="r_ga4e9ba87c356963e57006b8f3e5a6e812"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4e9ba87c356963e57006b8f3e5a6e812">VAC_THRESHOLD_HIGH</a>&#160;&#160;&#160;140</td></tr>
<tr class="memitem:gab0b92606465c691bee11d63d3c5f0982" id="r_gab0b92606465c691bee11d63d3c5f0982"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab0b92606465c691bee11d63d3c5f0982">FAN_UPDATE_PERIOD_TICKS</a>&#160;&#160;&#160;100000</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga2ab40e496ed47c23875cbb65b689e9a4" id="r_ga2ab40e496ed47c23875cbb65b689e9a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2ab40e496ed47c23875cbb65b689e9a4">peripheral_on_llc_relay_</a> (void)</td></tr>
<tr class="memdesc:ga2ab40e496ed47c23875cbb65b689e9a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Peripheral module function implementations.  <br /></td></tr>
<tr class="memitem:ga3964b50e6ae1e0fffa533ee5ce56211d" id="r_ga3964b50e6ae1e0fffa533ee5ce56211d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga3964b50e6ae1e0fffa533ee5ce56211d">peripheral_off_llc_relay_</a> (void)</td></tr>
<tr class="memdesc:ga3964b50e6ae1e0fffa533ee5ce56211d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable LLC relay.  <br /></td></tr>
<tr class="memitem:gae09a4fb82f031ec0de625ec8271496f4" id="r_gae09a4fb82f031ec0de625ec8271496f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae09a4fb82f031ec0de625ec8271496f4">peripheral_on_pfc_relay_</a> (void)</td></tr>
<tr class="memdesc:gae09a4fb82f031ec0de625ec8271496f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable PFC relay.  <br /></td></tr>
<tr class="memitem:ga5ab6542999b127993cd599854a65f2fb" id="r_ga5ab6542999b127993cd599854a65f2fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5ab6542999b127993cd599854a65f2fb">peripheral_off_pfc_relay_</a> (void)</td></tr>
<tr class="memdesc:ga5ab6542999b127993cd599854a65f2fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable PFC relay.  <br /></td></tr>
<tr class="memitem:gae12639ea85a4757563a55dac9b1fc54c" id="r_gae12639ea85a4757563a55dac9b1fc54c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae12639ea85a4757563a55dac9b1fc54c">peripheral_on_pfc_vcomp_</a> (void)</td></tr>
<tr class="memdesc:gae12639ea85a4757563a55dac9b1fc54c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable PFC voltage compensation signal.  <br /></td></tr>
<tr class="memitem:gadec52c1bfc71292a44e1e8c248ad8344" id="r_gadec52c1bfc71292a44e1e8c248ad8344"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gadec52c1bfc71292a44e1e8c248ad8344">peripheral_off_pfc_vcomp_</a> (void)</td></tr>
<tr class="memdesc:gadec52c1bfc71292a44e1e8c248ad8344"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable PFC voltage compensation signal.  <br /></td></tr>
<tr class="memitem:gae389a4ec8879fd13922b8c01b691c7c3" id="r_gae389a4ec8879fd13922b8c01b691c7c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae389a4ec8879fd13922b8c01b691c7c3">peripheral_control_fan_</a> ()</td></tr>
<tr class="memdesc:gae389a4ec8879fd13922b8c01b691c7c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control fan speed with rule-based system.  <br /></td></tr>
<tr class="memitem:gab84b9c81bef5d760800ce5dff4ef70e0" id="r_gab84b9c81bef5d760800ce5dff4ef70e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab84b9c81bef5d760800ce5dff4ef70e0">peripheral_enable_fan_</a> (void)</td></tr>
<tr class="memdesc:gab84b9c81bef5d760800ce5dff4ef70e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable fan operation.  <br /></td></tr>
<tr class="memitem:gac5a6e14268bd3d31e4ca078bfc23389d" id="r_gac5a6e14268bd3d31e4ca078bfc23389d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac5a6e14268bd3d31e4ca078bfc23389d">peripheral_disable_fan_</a> (void)</td></tr>
<tr class="memdesc:gac5a6e14268bd3d31e4ca078bfc23389d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable fan operation.  <br /></td></tr>
<tr class="memitem:gadb8df55b1530025ce335441cda79041b" id="r_gadb8df55b1530025ce335441cda79041b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gadb8df55b1530025ce335441cda79041b">peripheral_tick_</a> (<a class="el" href="struct_s___fan___update_type_def.html">S_Fan_UpdateTypeDef</a> *fan_ctrl)</td></tr>
<tr class="memdesc:gadb8df55b1530025ce335441cda79041b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tick function for fan control update.  <br /></td></tr>
<tr class="memitem:ga0d941d936181024d0a591cbf438f35cd" id="r_ga0d941d936181024d0a591cbf438f35cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0d941d936181024d0a591cbf438f35cd">peripheral_process_update_</a> (<a class="el" href="struct_s___fan___update_type_def.html">S_Fan_UpdateTypeDef</a> *fan_ctrl)</td></tr>
<tr class="memdesc:ga0d941d936181024d0a591cbf438f35cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process fan control update if flag set.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gad6f773814f8d2292f2b6db7edced4e17" id="r_gad6f773814f8d2292f2b6db7edced4e17"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_s___f_a_n.html">S_FAN</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad6f773814f8d2292f2b6db7edced4e17">g_fan_control</a></td></tr>
<tr class="memdesc:gad6f773814f8d2292f2b6db7edced4e17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variables exported by Peripheral module.  <br /></td></tr>
<tr class="memitem:ga1267db926f876e7725598ea9ee6bb954" id="r_ga1267db926f876e7725598ea9ee6bb954"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_s___fan___update_type_def.html">S_Fan_UpdateTypeDef</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1267db926f876e7725598ea9ee6bb954">g_fan_ctrl</a></td></tr>
<tr class="memdesc:ga1267db926f876e7725598ea9ee6bb954"><td class="mdescLeft">&#160;</td><td class="mdescRight">Include required header files.  <br /></td></tr>
<tr class="memitem:gaea625372cc999a3eb978727a5a91c29e" id="r_gaea625372cc999a3eb978727a5a91c29e"><td class="memItemLeft" align="right" valign="top">_Bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaea625372cc999a3eb978727a5a91c29e">enable_fan</a></td></tr>
<tr class="memitem:ga0bd23f557562b62db3421f6d79641289" id="r_ga0bd23f557562b62db3421f6d79641289"><td class="memItemLeft" align="right" valign="top">_Bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0bd23f557562b62db3421f6d79641289">request_high_temp</a></td></tr>
<tr class="memitem:ga09ad34144e86c2ed9ac2061318320f10" id="r_ga09ad34144e86c2ed9ac2061318320f10"><td class="memItemLeft" align="right" valign="top">_Bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga09ad34144e86c2ed9ac2061318320f10">request_high_voltage</a></td></tr>
<tr class="memitem:ga81b43df06332b4fef558297592bb7ff1" id="r_ga81b43df06332b4fef558297592bb7ff1"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga81b43df06332b4fef558297592bb7ff1">period</a></td></tr>
<tr class="memitem:ga51322ddb267b4729d6b5f2bb05d49fff" id="r_ga51322ddb267b4729d6b5f2bb05d49fff"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga51322ddb267b4729d6b5f2bb05d49fff">counter</a></td></tr>
<tr class="memitem:ga97373b7916d388eb61d634014e054dea" id="r_ga97373b7916d388eb61d634014e054dea"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga97373b7916d388eb61d634014e054dea">flgUpdate</a></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p>Board peripheral control (relays, fan, VCOMP). </p>
<p>This module provides high-level control for board peripherals:</p><ul>
<li>LLC relay control for output stage switching</li>
<li>PFC relay control for power factor correction stage</li>
<li>PFC VCOMP signal for voltage compensation</li>
<li>Fan control with rule-based speed adjustment</li>
<li>Multi-factor decision making (temperature, voltage)</li>
<li>Hysteresis-based threshold switching</li>
<li>Periodic update mechanism (10s interval)</li>
</ul>
<dl class="section version"><dt>Version</dt><dd>1.0.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>August 18, 2025 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>EVSELab Co. Jsc. </dd></dl>
<a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="ga08472d44e87b231eec74b2083c2c0b4a" name="ga08472d44e87b231eec74b2083c2c0b4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga08472d44e87b231eec74b2083c2c0b4a">&#9670;&#160;</a></span>DUTY_FAN_HIGH_POWER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUTY_FAN_HIGH_POWER&#160;&#160;&#160;80</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fan duty cycle for high power mode (%) </p>

</div>
</div>
<a id="ga8abb85394abb52683a88a5c813a1dbb5" name="ga8abb85394abb52683a88a5c813a1dbb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8abb85394abb52683a88a5c813a1dbb5">&#9670;&#160;</a></span>DUTY_FAN_LOW_POWER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUTY_FAN_LOW_POWER&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Include required header files. </p>
<p>Public constant definitions. </p><dl class="section note"><dt>Note</dt><dd>Peripheral control parameters and thresholds. Fan duty cycle for low power mode (%) </dd></dl>

</div>
</div>
<a id="gab0b92606465c691bee11d63d3c5f0982" name="gab0b92606465c691bee11d63d3c5f0982"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab0b92606465c691bee11d63d3c5f0982">&#9670;&#160;</a></span>FAN_UPDATE_PERIOD_TICKS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FAN_UPDATE_PERIOD_TICKS&#160;&#160;&#160;100000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fan control update period (10s @ 10kHz) </p>

</div>
</div>
<a id="gae7237291e5dd904b9eeeb466dd59fb19" name="gae7237291e5dd904b9eeeb466dd59fb19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae7237291e5dd904b9eeeb466dd59fb19">&#9670;&#160;</a></span>TEMP_THRESHOLD_HIGH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TEMP_THRESHOLD_HIGH&#160;&#160;&#160;65</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Temperature threshold for high power request (°C) </p>

</div>
</div>
<a id="ga37aea109a37b3e252e89be6ef84df8a6" name="ga37aea109a37b3e252e89be6ef84df8a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga37aea109a37b3e252e89be6ef84df8a6">&#9670;&#160;</a></span>TEMP_THRESHOLD_LOW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TEMP_THRESHOLD_LOW&#160;&#160;&#160;40</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Temperature threshold for low power allow (°C) </p>

</div>
</div>
<a id="ga4e9ba87c356963e57006b8f3e5a6e812" name="ga4e9ba87c356963e57006b8f3e5a6e812"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4e9ba87c356963e57006b8f3e5a6e812">&#9670;&#160;</a></span>VAC_THRESHOLD_HIGH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VAC_THRESHOLD_HIGH&#160;&#160;&#160;140</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>AC voltage threshold for high power request (V) </p>

</div>
</div>
<a id="gab9ca9a982130be9d54fb6d136e770965" name="gab9ca9a982130be9d54fb6d136e770965"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab9ca9a982130be9d54fb6d136e770965">&#9670;&#160;</a></span>VAC_THRESHOLD_LOW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VAC_THRESHOLD_LOW&#160;&#160;&#160;120</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>AC voltage threshold for low power allow (V) </p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="gae389a4ec8879fd13922b8c01b691c7c3" name="gae389a4ec8879fd13922b8c01b691c7c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae389a4ec8879fd13922b8c01b691c7c3">&#9670;&#160;</a></span>peripheral_control_fan_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void peripheral_control_fan_ </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Control fan speed with rule-based system. </p>
<p>Implements multi-factor decision making for fan speed: </p><pre class="fragment">     Factor 1 - Temperature (with hysteresis):
     - Get max_temp = max(PFC_thermal, LLC_thermal)
     - If max_temp &lt; 65°C: request_high_temp = true (high cooling needed)
     - If max_temp &gt; 40°C: request_high_temp = false (low cooling sufficient)
     - Hysteresis zone (40-65°C): maintain current state

     Factor 2 - AC Voltage (with hysteresis, inverted logic):
     - Get VAC from averaged measurement
     - If VAC &lt; 140V: request_high_voltage = true (low voltage = high current)
     - If VAC &gt; 120V: request_high_voltage = false (normal voltage)
     - Hysteresis zone (120-140V): maintain current state

     Decision Logic:
     - If fan disabled: duty = 0%
     - If request_high_temp:
       * If request_high_voltage: duty = 80% (both factors)
       * Else: duty = 20% (only temperature)
     - Else: duty = 20% (default low power)
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call periodically (e.g., every 10s) via <a class="el" href="#ga0d941d936181024d0a591cbf438f35cd" title="Process fan control update if flag set.">peripheral_process_update_()</a>. </dd>
<dd>
Uses averaged AC voltage for stable decision making. </dd>
<dd>
Hysteresis prevents oscillation at threshold boundaries.</dd></dl>
<p>Implements multi-factor decision making for fan speed: </p><pre class="fragment">     Factor 1 - Temperature (with hysteresis):
     - max_temp = max(PFC_thermal, LLC_thermal)
     - If max_temp &lt; 65°C: request_high_temp = true
     - If max_temp &gt; 40°C: request_high_temp = false
     - Hysteresis zone (40-65°C): maintain current state

     Factor 2 - AC Voltage (with hysteresis, inverted logic):
     - If VAC &lt; 140V: request_high_voltage = true
     - If VAC &gt; 120V: request_high_voltage = false
     - Hysteresis zone (120-140V): maintain current state

     Decision Logic:
     - If fan disabled: duty = 0%
     - If request_high_temp AND request_high_voltage: duty = 80%
     - If request_high_temp OR request_high_voltage: duty = 20%
     - Else: duty = 20%
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call periodically (e.g., every 10s) via <a class="el" href="#ga0d941d936181024d0a591cbf438f35cd" title="Process fan control update if flag set.">peripheral_process_update_()</a>. </dd>
<dd>
Uses averaged AC voltage for stable decision making. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_gae389a4ec8879fd13922b8c01b691c7c3_cgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae389a4ec8879fd13922b8c01b691c7c3_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae389a4ec8879fd13922b8c01b691c7c3_cgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae389a4ec8879fd13922b8c01b691c7c3_cgraph">
<area shape="rect" title="Control fan speed with rule&#45;based system." alt="" coords="5,5,161,32"/>
<area shape="rect" href="group___d_r_v___p_w_m.html#ga116567f2c1c3d8f8419bc896bf1fd293" title="Set PWM duty cycle." alt="" coords="209,5,322,32"/>
<area shape="poly" title=" " alt="" coords="161,16,193,16,193,21,161,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_gae389a4ec8879fd13922b8c01b691c7c3_icgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae389a4ec8879fd13922b8c01b691c7c3_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae389a4ec8879fd13922b8c01b691c7c3_icgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae389a4ec8879fd13922b8c01b691c7c3_icgraph">
<area shape="rect" title="Control fan speed with rule&#45;based system." alt="" coords="468,13,624,40"/>
<area shape="rect" href="group___m_i_d___p_e_r_i_p_h_e_r_a_l.html#ga0d941d936181024d0a591cbf438f35cd" title="Process fan control update if flag set." alt="" coords="290,5,420,48"/>
<area shape="poly" title=" " alt="" coords="453,29,421,29,421,24,453,24"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#gaa975937fac78c9e28b50ff05c8325e2f" title="Infinite loop processing for background tasks." alt="" coords="103,13,242,40"/>
<area shape="poly" title=" " alt="" coords="275,29,242,29,242,24,275,24"/>
<area shape="rect" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,13,55,40"/>
<area shape="poly" title=" " alt="" coords="87,29,55,29,55,24,87,24"/>
</map>
</div>

</div>
</div>
<a id="gac5a6e14268bd3d31e4ca078bfc23389d" name="gac5a6e14268bd3d31e4ca078bfc23389d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac5a6e14268bd3d31e4ca078bfc23389d">&#9670;&#160;</a></span>peripheral_disable_fan_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void peripheral_disable_fan_ </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable fan operation. </p>
<p>Sets enable_fan flag to false. Fan duty cycle forced to 0% regardless of temperature and voltage conditions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call during standby or fault condition. </dd></dl>

</div>
</div>
<a id="gab84b9c81bef5d760800ce5dff4ef70e0" name="gab84b9c81bef5d760800ce5dff4ef70e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab84b9c81bef5d760800ce5dff4ef70e0">&#9670;&#160;</a></span>peripheral_enable_fan_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void peripheral_enable_fan_ </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable fan operation. </p>
<p>Sets enable_fan flag to true. Fan speed will be determined by <a class="el" href="#gae389a4ec8879fd13922b8c01b691c7c3" title="Control fan speed with rule-based system.">peripheral_control_fan_()</a> based on temperature and voltage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call during normal operation mode. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_gab84b9c81bef5d760800ce5dff4ef70e0_icgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gab84b9c81bef5d760800ce5dff4ef70e0_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gab84b9c81bef5d760800ce5dff4ef70e0_icgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gab84b9c81bef5d760800ce5dff4ef70e0_icgraph">
<area shape="rect" title="Enable fan operation." alt="" coords="934,31,1088,57"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#ga25f2b5c68a1ec0310d97a37e6309f183" title="Handle IDLE state operations." alt="" coords="752,5,870,32"/>
<area shape="poly" title=" " alt="" coords="918,35,871,29,871,24,919,30"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gac044c2a9b23a166045e549e87cf16015" title="Handle PFC_START state operations." alt="" coords="737,56,886,83"/>
<area shape="poly" title=" " alt="" coords="919,58,886,63,886,57,918,53"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gafc5058be8e5904fe82c000699ae798d8" title="Update EVSE state machine." alt="" coords="592,31,689,57"/>
<area shape="poly" title=" " alt="" coords="737,32,689,40,689,34,737,27"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#ga8a7c85b9c345204d44030fb96316a5eb" title="EVSE application processing handler." alt="" coords="365,31,544,57"/>
<area shape="poly" title=" " alt="" coords="577,47,545,47,545,41,577,41"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#ga45b2b0ff3f21c7abe00874a5057a0efd" title="Main interrupt service routine for real&#45;time control." alt="" coords="142,31,317,57"/>
<area shape="poly" title=" " alt="" coords="350,47,318,47,318,41,350,41"/>
<area shape="rect" href="main_8c.html#a4665d4e1d5fea2d34089d4e50a763751" title=" " alt="" coords="5,31,94,57"/>
<area shape="poly" title=" " alt="" coords="126,47,94,47,94,41,126,41"/>
<area shape="poly" title=" " alt="" coords="721,59,689,54,689,48,722,53"/>
</map>
</div>

</div>
</div>
<a id="ga3964b50e6ae1e0fffa533ee5ce56211d" name="ga3964b50e6ae1e0fffa533ee5ce56211d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3964b50e6ae1e0fffa533ee5ce56211d">&#9670;&#160;</a></span>peripheral_off_llc_relay_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void peripheral_off_llc_relay_ </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable LLC relay. </p>
<p>Clears GPIO pin controlling LLC relay to low (OFF state). Disconnects output stage for safety or standby. Uses GPIO_MCU_LLC_RELAY pin.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call before shutdown or in fault condition.</dd></dl>
<p>Clears GPIO pin controlling LLC relay to low (OFF state). Disconnects output stage for safety or standby.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call before shutdown or in fault condition. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_ga3964b50e6ae1e0fffa533ee5ce56211d_cgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga3964b50e6ae1e0fffa533ee5ce56211d_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga3964b50e6ae1e0fffa533ee5ce56211d_cgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga3964b50e6ae1e0fffa533ee5ce56211d_cgraph">
<area shape="rect" title="Disable LLC relay." alt="" coords="5,5,124,48"/>
<area shape="rect" href="group___d_r_v___g_p_i_o.html#gae3496ae9fc231061c5da379a05932c31" title="Clear GPIO pin to LOW." alt="" coords="172,13,283,40"/>
<area shape="poly" title=" " alt="" coords="124,24,156,24,156,29,124,29"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_ga3964b50e6ae1e0fffa533ee5ce56211d_icgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga3964b50e6ae1e0fffa533ee5ce56211d_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga3964b50e6ae1e0fffa533ee5ce56211d_icgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga3964b50e6ae1e0fffa533ee5ce56211d_icgraph">
<area shape="rect" title="Disable LLC relay." alt="" coords="953,23,1071,65"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#ga55640c3a709e22874c844ffee4440939" title="Handle FAULT state operations." alt="" coords="759,5,882,32"/>
<area shape="poly" title=" " alt="" coords="937,37,883,29,883,24,938,32"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gaa609d54e2438e5450f96fd281720c5cf" title="Handle FULLYCHARGED state operations." alt="" coords="737,56,905,83"/>
<area shape="poly" title=" " alt="" coords="938,56,906,61,905,56,937,51"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gafc5058be8e5904fe82c000699ae798d8" title="Update EVSE state machine." alt="" coords="592,31,689,57"/>
<area shape="poly" title=" " alt="" coords="745,32,690,40,689,35,744,27"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#ga8a7c85b9c345204d44030fb96316a5eb" title="EVSE application processing handler." alt="" coords="365,31,544,57"/>
<area shape="poly" title=" " alt="" coords="577,47,545,47,545,41,577,41"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#ga45b2b0ff3f21c7abe00874a5057a0efd" title="Main interrupt service routine for real&#45;time control." alt="" coords="142,31,317,57"/>
<area shape="poly" title=" " alt="" coords="350,47,318,47,318,41,350,41"/>
<area shape="rect" href="main_8c.html#a4665d4e1d5fea2d34089d4e50a763751" title=" " alt="" coords="5,31,94,57"/>
<area shape="poly" title=" " alt="" coords="126,47,94,47,94,41,126,41"/>
<area shape="poly" title=" " alt="" coords="721,58,689,53,689,48,722,53"/>
</map>
</div>

</div>
</div>
<a id="ga5ab6542999b127993cd599854a65f2fb" name="ga5ab6542999b127993cd599854a65f2fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5ab6542999b127993cd599854a65f2fb">&#9670;&#160;</a></span>peripheral_off_pfc_relay_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void peripheral_off_pfc_relay_ </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable PFC relay. </p>
<p>Clears GPIO pin controlling PFC relay to low (OFF state). Disconnects PFC stage for safety or standby. Uses GPIO_MCU_PFC_RELAY pin.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call before shutdown or in fault condition.</dd></dl>
<p>Clears GPIO pin controlling PFC relay to low (OFF state). Disconnects PFC stage for safety or standby.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call before shutdown or in fault condition. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_ga5ab6542999b127993cd599854a65f2fb_cgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga5ab6542999b127993cd599854a65f2fb_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga5ab6542999b127993cd599854a65f2fb_cgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga5ab6542999b127993cd599854a65f2fb_cgraph">
<area shape="rect" title="Disable PFC relay." alt="" coords="5,5,129,48"/>
<area shape="rect" href="group___d_r_v___g_p_i_o.html#gae3496ae9fc231061c5da379a05932c31" title="Clear GPIO pin to LOW." alt="" coords="177,13,288,40"/>
<area shape="poly" title=" " alt="" coords="129,24,161,24,161,29,129,29"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_ga5ab6542999b127993cd599854a65f2fb_icgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga5ab6542999b127993cd599854a65f2fb_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga5ab6542999b127993cd599854a65f2fb_icgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga5ab6542999b127993cd599854a65f2fb_icgraph">
<area shape="rect" title="Disable PFC relay." alt="" coords="953,48,1076,91"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#ga55640c3a709e22874c844ffee4440939" title="Handle FAULT state operations." alt="" coords="759,5,882,32"/>
<area shape="poly" title=" " alt="" coords="938,52,874,35,875,30,939,47"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gaa609d54e2438e5450f96fd281720c5cf" title="Handle FULLYCHARGED state operations." alt="" coords="737,56,905,83"/>
<area shape="poly" title=" " alt="" coords="938,72,905,72,905,67,938,67"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#ga25f2b5c68a1ec0310d97a37e6309f183" title="Handle IDLE state operations." alt="" coords="762,107,880,133"/>
<area shape="poly" title=" " alt="" coords="939,92,875,109,874,104,938,87"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gafc5058be8e5904fe82c000699ae798d8" title="Update EVSE state machine." alt="" coords="592,56,689,83"/>
<area shape="poly" title=" " alt="" coords="757,39,690,58,688,53,756,34"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#ga8a7c85b9c345204d44030fb96316a5eb" title="EVSE application processing handler." alt="" coords="365,56,544,83"/>
<area shape="poly" title=" " alt="" coords="577,72,545,72,545,67,577,67"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#ga45b2b0ff3f21c7abe00874a5057a0efd" title="Main interrupt service routine for real&#45;time control." alt="" coords="142,56,317,83"/>
<area shape="poly" title=" " alt="" coords="350,72,318,72,318,67,350,67"/>
<area shape="rect" href="main_8c.html#a4665d4e1d5fea2d34089d4e50a763751" title=" " alt="" coords="5,56,94,83"/>
<area shape="poly" title=" " alt="" coords="126,72,94,72,94,67,126,67"/>
<area shape="poly" title=" " alt="" coords="721,72,689,72,689,67,721,67"/>
<area shape="poly" title=" " alt="" coords="756,105,688,85,690,80,757,99"/>
</map>
</div>

</div>
</div>
<a id="gadec52c1bfc71292a44e1e8c248ad8344" name="gadec52c1bfc71292a44e1e8c248ad8344"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadec52c1bfc71292a44e1e8c248ad8344">&#9670;&#160;</a></span>peripheral_off_pfc_vcomp_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void peripheral_off_pfc_vcomp_ </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable PFC voltage compensation signal. </p>
<p>Clears GPIO pin controlling PFC VCOMP to low. Deactivates voltage compensation for PFC stage. Uses GPIO_MCU_PFC_VCOMP pin.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Use for PFC control signal adjustment.</dd></dl>
<p>Clears GPIO pin controlling PFC VCOMP to low. Deactivates voltage compensation for PFC stage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Use for PFC control signal adjustment. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_gadec52c1bfc71292a44e1e8c248ad8344_cgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gadec52c1bfc71292a44e1e8c248ad8344_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gadec52c1bfc71292a44e1e8c248ad8344_cgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gadec52c1bfc71292a44e1e8c248ad8344_cgraph">
<area shape="rect" title="Disable PFC voltage compensation signal." alt="" coords="5,5,129,48"/>
<area shape="rect" href="group___d_r_v___g_p_i_o.html#gae3496ae9fc231061c5da379a05932c31" title="Clear GPIO pin to LOW." alt="" coords="177,13,288,40"/>
<area shape="poly" title=" " alt="" coords="129,24,161,24,161,29,129,29"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_gadec52c1bfc71292a44e1e8c248ad8344_icgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gadec52c1bfc71292a44e1e8c248ad8344_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gadec52c1bfc71292a44e1e8c248ad8344_icgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gadec52c1bfc71292a44e1e8c248ad8344_icgraph">
<area shape="rect" title="Disable PFC voltage compensation signal." alt="" coords="934,5,1057,48"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gac044c2a9b23a166045e549e87cf16015" title="Handle PFC_START state operations." alt="" coords="737,13,886,40"/>
<area shape="poly" title=" " alt="" coords="918,29,886,29,886,24,918,24"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gafc5058be8e5904fe82c000699ae798d8" title="Update EVSE state machine." alt="" coords="592,13,689,40"/>
<area shape="poly" title=" " alt="" coords="721,29,689,29,689,24,721,24"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#ga8a7c85b9c345204d44030fb96316a5eb" title="EVSE application processing handler." alt="" coords="365,13,544,40"/>
<area shape="poly" title=" " alt="" coords="577,29,545,29,545,24,577,24"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#ga45b2b0ff3f21c7abe00874a5057a0efd" title="Main interrupt service routine for real&#45;time control." alt="" coords="142,13,317,40"/>
<area shape="poly" title=" " alt="" coords="350,29,318,29,318,24,350,24"/>
<area shape="rect" href="main_8c.html#a4665d4e1d5fea2d34089d4e50a763751" title=" " alt="" coords="5,13,94,40"/>
<area shape="poly" title=" " alt="" coords="126,29,94,29,94,24,126,24"/>
</map>
</div>

</div>
</div>
<a id="ga2ab40e496ed47c23875cbb65b689e9a4" name="ga2ab40e496ed47c23875cbb65b689e9a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2ab40e496ed47c23875cbb65b689e9a4">&#9670;&#160;</a></span>peripheral_on_llc_relay_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void peripheral_on_llc_relay_ </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Peripheral module function implementations. </p>
<p>Peripheral module function declarations.</p>
<p>Enable LLC relay.</p>
<p>Sets GPIO pin controlling LLC relay to high (ON state). Connects output stage for LLC converter operation. Uses GPIO_MCU_LLC_RELAY pin.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call after LLC initialization and before starting switching.</dd></dl>
<p>Enable LLC relay.</p>
<p>Sets GPIO pin controlling LLC relay to high (ON state). Connects output stage for LLC converter operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call after LLC initialization and before starting switching. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_ga2ab40e496ed47c23875cbb65b689e9a4_cgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga2ab40e496ed47c23875cbb65b689e9a4_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga2ab40e496ed47c23875cbb65b689e9a4_cgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga2ab40e496ed47c23875cbb65b689e9a4_cgraph">
<area shape="rect" title="Peripheral module function implementations." alt="" coords="5,5,166,32"/>
<area shape="rect" href="group___d_r_v___g_p_i_o.html#ga4271fb2a50347e4f4489da04a31bf6f4" title="Include public and private headers." alt="" coords="214,5,315,32"/>
<area shape="poly" title=" " alt="" coords="166,16,198,16,198,21,166,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_ga2ab40e496ed47c23875cbb65b689e9a4_icgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga2ab40e496ed47c23875cbb65b689e9a4_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga2ab40e496ed47c23875cbb65b689e9a4_icgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga2ab40e496ed47c23875cbb65b689e9a4_icgraph">
<area shape="rect" title="Peripheral module function implementations." alt="" coords="946,5,1106,32"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gad96831e426a2010e8f1da8669cf9ec46" title="Handle HANDSHAKE state operations." alt="" coords="737,5,898,32"/>
<area shape="poly" title=" " alt="" coords="931,21,899,21,899,16,931,16"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gafc5058be8e5904fe82c000699ae798d8" title="Update EVSE state machine." alt="" coords="592,5,689,32"/>
<area shape="poly" title=" " alt="" coords="721,21,689,21,689,16,721,16"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#ga8a7c85b9c345204d44030fb96316a5eb" title="EVSE application processing handler." alt="" coords="365,5,544,32"/>
<area shape="poly" title=" " alt="" coords="577,21,545,21,545,16,577,16"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#ga45b2b0ff3f21c7abe00874a5057a0efd" title="Main interrupt service routine for real&#45;time control." alt="" coords="142,5,317,32"/>
<area shape="poly" title=" " alt="" coords="350,21,318,21,318,16,350,16"/>
<area shape="rect" href="main_8c.html#a4665d4e1d5fea2d34089d4e50a763751" title=" " alt="" coords="5,5,94,32"/>
<area shape="poly" title=" " alt="" coords="126,21,94,21,94,16,126,16"/>
</map>
</div>

</div>
</div>
<a id="gae09a4fb82f031ec0de625ec8271496f4" name="gae09a4fb82f031ec0de625ec8271496f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae09a4fb82f031ec0de625ec8271496f4">&#9670;&#160;</a></span>peripheral_on_pfc_relay_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void peripheral_on_pfc_relay_ </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable PFC relay. </p>
<p>Sets GPIO pin controlling PFC relay to high (ON state). Connects power factor correction stage. Uses GPIO_MCU_PFC_RELAY pin.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call after PFC initialization and before starting operation.</dd></dl>
<p>Sets GPIO pin controlling PFC relay to high (ON state). Connects power factor correction stage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call after PFC initialization and before starting operation. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_gae09a4fb82f031ec0de625ec8271496f4_cgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae09a4fb82f031ec0de625ec8271496f4_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae09a4fb82f031ec0de625ec8271496f4_cgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae09a4fb82f031ec0de625ec8271496f4_cgraph">
<area shape="rect" title="Enable PFC relay." alt="" coords="5,5,171,32"/>
<area shape="rect" href="group___d_r_v___g_p_i_o.html#ga4271fb2a50347e4f4489da04a31bf6f4" title="Include public and private headers." alt="" coords="219,5,320,32"/>
<area shape="poly" title=" " alt="" coords="171,16,203,16,203,21,171,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_gae09a4fb82f031ec0de625ec8271496f4_icgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae09a4fb82f031ec0de625ec8271496f4_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae09a4fb82f031ec0de625ec8271496f4_icgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae09a4fb82f031ec0de625ec8271496f4_icgraph">
<area shape="rect" title="Enable PFC relay." alt="" coords="934,5,1099,32"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gac044c2a9b23a166045e549e87cf16015" title="Handle PFC_START state operations." alt="" coords="737,5,886,32"/>
<area shape="poly" title=" " alt="" coords="918,21,886,21,886,16,918,16"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gafc5058be8e5904fe82c000699ae798d8" title="Update EVSE state machine." alt="" coords="592,5,689,32"/>
<area shape="poly" title=" " alt="" coords="721,21,689,21,689,16,721,16"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#ga8a7c85b9c345204d44030fb96316a5eb" title="EVSE application processing handler." alt="" coords="365,5,544,32"/>
<area shape="poly" title=" " alt="" coords="577,21,545,21,545,16,577,16"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#ga45b2b0ff3f21c7abe00874a5057a0efd" title="Main interrupt service routine for real&#45;time control." alt="" coords="142,5,317,32"/>
<area shape="poly" title=" " alt="" coords="350,21,318,21,318,16,350,16"/>
<area shape="rect" href="main_8c.html#a4665d4e1d5fea2d34089d4e50a763751" title=" " alt="" coords="5,5,94,32"/>
<area shape="poly" title=" " alt="" coords="126,21,94,21,94,16,126,16"/>
</map>
</div>

</div>
</div>
<a id="gae12639ea85a4757563a55dac9b1fc54c" name="gae12639ea85a4757563a55dac9b1fc54c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae12639ea85a4757563a55dac9b1fc54c">&#9670;&#160;</a></span>peripheral_on_pfc_vcomp_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void peripheral_on_pfc_vcomp_ </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable PFC voltage compensation signal. </p>
<p>Sets GPIO pin controlling PFC VCOMP to high. Activates voltage compensation for PFC stage. Uses GPIO_MCU_PFC_VCOMP pin.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Use for PFC control signal adjustment.</dd></dl>
<p>Sets GPIO pin controlling PFC VCOMP to high. Activates voltage compensation for PFC stage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Use for PFC control signal adjustment. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_gae12639ea85a4757563a55dac9b1fc54c_cgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae12639ea85a4757563a55dac9b1fc54c_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae12639ea85a4757563a55dac9b1fc54c_cgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae12639ea85a4757563a55dac9b1fc54c_cgraph">
<area shape="rect" title="Enable PFC voltage compensation signal." alt="" coords="5,5,182,32"/>
<area shape="rect" href="group___d_r_v___g_p_i_o.html#ga4271fb2a50347e4f4489da04a31bf6f4" title="Include public and private headers." alt="" coords="230,5,331,32"/>
<area shape="poly" title=" " alt="" coords="182,16,214,16,214,21,182,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_gae12639ea85a4757563a55dac9b1fc54c_icgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae12639ea85a4757563a55dac9b1fc54c_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae12639ea85a4757563a55dac9b1fc54c_icgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_gae12639ea85a4757563a55dac9b1fc54c_icgraph">
<area shape="rect" title="Enable PFC voltage compensation signal." alt="" coords="953,81,1129,108"/>
<area shape="rect" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="796,5,846,32"/>
<area shape="poly" title=" " alt="" coords="989,78,904,47,845,28,847,23,906,41,991,73"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#ga55640c3a709e22874c844ffee4440939" title="Handle FAULT state operations." alt="" coords="759,56,882,83"/>
<area shape="poly" title=" " alt="" coords="937,85,882,79,883,74,938,80"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gaa609d54e2438e5450f96fd281720c5cf" title="Handle FULLYCHARGED state operations." alt="" coords="737,107,905,133"/>
<area shape="poly" title=" " alt="" coords="938,109,906,113,905,108,937,104"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#ga25f2b5c68a1ec0310d97a37e6309f183" title="Handle IDLE state operations." alt="" coords="762,157,880,184"/>
<area shape="poly" title=" " alt="" coords="991,117,906,148,870,159,869,154,904,143,989,112"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#gafc5058be8e5904fe82c000699ae798d8" title="Update EVSE state machine." alt="" coords="592,107,689,133"/>
<area shape="poly" title=" " alt="" coords="757,90,690,109,688,104,756,85"/>
<area shape="rect" href="group___a_p_p___s_t_a_t_e___m_a_n_a_g_e_m_e_n_t.html#ga8a7c85b9c345204d44030fb96316a5eb" title="EVSE application processing handler." alt="" coords="365,107,544,133"/>
<area shape="poly" title=" " alt="" coords="577,123,545,123,545,117,577,117"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#ga45b2b0ff3f21c7abe00874a5057a0efd" title="Main interrupt service routine for real&#45;time control." alt="" coords="142,107,317,133"/>
<area shape="poly" title=" " alt="" coords="350,123,318,123,318,117,350,117"/>
<area shape="rect" href="main_8c.html#a4665d4e1d5fea2d34089d4e50a763751" title=" " alt="" coords="5,107,94,133"/>
<area shape="poly" title=" " alt="" coords="126,123,94,123,94,117,126,117"/>
<area shape="poly" title=" " alt="" coords="721,123,689,123,689,117,721,117"/>
<area shape="poly" title=" " alt="" coords="756,155,688,136,690,131,757,150"/>
</map>
</div>

</div>
</div>
<a id="ga0d941d936181024d0a591cbf438f35cd" name="ga0d941d936181024d0a591cbf438f35cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0d941d936181024d0a591cbf438f35cd">&#9670;&#160;</a></span>peripheral_process_update_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void peripheral_process_update_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s___fan___update_type_def.html">S_Fan_UpdateTypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>fan_ctrl</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process fan control update if flag set. </p>
<p>Checks flgUpdate and performs fan speed adjustment when period elapsed:</p><ol type="1">
<li>Check if flgUpdate == 1 (set by peripheral_tick_ in ISR)</li>
<li>If true: a. Call <a class="el" href="#gae389a4ec8879fd13922b8c01b691c7c3" title="Control fan speed with rule-based system.">peripheral_control_fan_()</a> to update speed b. Clear flgUpdate to 0</li>
<li>If false: return immediately (non-blocking)</li>
</ol>
<p>Should be called repeatedly in main loop, not ISR.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">fan_ctrl</td><td>Pointer to fan control instance</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call repeatedly in infinite loop. </dd>
<dd>
Non-blocking: only executes when flgUpdate=1. </dd>
<dd>
Separates time-critical ISR from non-critical fan control.</dd></dl>
<p>Checks flgUpdate and performs fan speed adjustment when period elapsed:</p><ol type="1">
<li>Check if flgUpdate == 1 (set by peripheral_tick_ in ISR)</li>
<li>If true: a. Call <a class="el" href="#gae389a4ec8879fd13922b8c01b691c7c3" title="Control fan speed with rule-based system.">peripheral_control_fan_()</a> to update speed b. Clear flgUpdate to 0</li>
<li>If false: return immediately (non-blocking)</li>
</ol>
<p>Should be called repeatedly in main loop, not ISR.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">fan_ctrl</td><td>Pointer to fan control instance</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call repeatedly in infinite loop. </dd>
<dd>
Non-blocking: only executes when flgUpdate=1. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_ga0d941d936181024d0a591cbf438f35cd_cgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga0d941d936181024d0a591cbf438f35cd_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga0d941d936181024d0a591cbf438f35cd_cgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga0d941d936181024d0a591cbf438f35cd_cgraph">
<area shape="rect" title="Process fan control update if flag set." alt="" coords="5,5,136,48"/>
<area shape="rect" href="group___m_i_d___p_e_r_i_p_h_e_r_a_l.html#gae389a4ec8879fd13922b8c01b691c7c3" title="Control fan speed with rule&#45;based system." alt="" coords="184,13,339,40"/>
<area shape="poly" title=" " alt="" coords="136,24,168,24,168,29,136,29"/>
<area shape="rect" href="group___d_r_v___p_w_m.html#ga116567f2c1c3d8f8419bc896bf1fd293" title="Set PWM duty cycle." alt="" coords="387,13,500,40"/>
<area shape="poly" title=" " alt="" coords="339,24,371,24,371,29,339,29"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_i_d___p_e_r_i_p_h_e_r_a_l_ga0d941d936181024d0a591cbf438f35cd_icgraph.png" border="0" usemap="#agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga0d941d936181024d0a591cbf438f35cd_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga0d941d936181024d0a591cbf438f35cd_icgraph" id="agroup___m_i_d___p_e_r_i_p_h_e_r_a_l_ga0d941d936181024d0a591cbf438f35cd_icgraph">
<area shape="rect" title="Process fan control update if flag set." alt="" coords="290,5,420,48"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#gaa975937fac78c9e28b50ff05c8325e2f" title="Infinite loop processing for background tasks." alt="" coords="103,13,242,40"/>
<area shape="poly" title=" " alt="" coords="275,29,242,29,242,24,275,24"/>
<area shape="rect" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,13,55,40"/>
<area shape="poly" title=" " alt="" coords="87,29,55,29,55,24,87,24"/>
</map>
</div>

</div>
</div>
<a id="gadb8df55b1530025ce335441cda79041b" name="gadb8df55b1530025ce335441cda79041b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadb8df55b1530025ce335441cda79041b">&#9670;&#160;</a></span>peripheral_tick_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void peripheral_tick_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s___fan___update_type_def.html">S_Fan_UpdateTypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>fan_ctrl</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tick function for fan control update. </p>
<p>Increments counter and sets update flag when period reached:</p><ol type="1">
<li>Increment counter every call (every sampling period)</li>
<li>If counter &gt;= period (100000 ticks = 10s @ 10kHz): a. Set flgUpdate = 1 (signal main loop to process) b. Reset counter = 0</li>
<li>Return (very fast, suitable for ISR)</li>
</ol>
<p>Should be called every sampling period in ISR (10kHz).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">fan_ctrl</td><td>Pointer to fan control instance</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call in main sampling interrupt (10kHz). </dd>
<dd>
Sets flgUpdate=1 every FAN_UPDATE_PERIOD_TICKS (100000 = 10s). </dd>
<dd>
Minimal ISR overhead: just increment and compare.</dd></dl>
<p>Increments counter and sets update flag when period reached. Counter resets to 0 after flag set. Should be called every sampling period in ISR.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">fan_ctrl</td><td>Pointer to fan control instance</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Call in main sampling interrupt (10kHz). </dd>
<dd>
Sets flgUpdate=1 every FAN_UPDATE_PERIOD_TICKS (100000 = 10s). </dd></dl>

</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="ga51322ddb267b4729d6b5f2bb05d49fff" name="ga51322ddb267b4729d6b5f2bb05d49fff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga51322ddb267b4729d6b5f2bb05d49fff">&#9670;&#160;</a></span>counter</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t counter</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Current tick counter </p>

</div>
</div>
<a id="gaea625372cc999a3eb978727a5a91c29e" name="gaea625372cc999a3eb978727a5a91c29e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaea625372cc999a3eb978727a5a91c29e">&#9670;&#160;</a></span>enable_fan</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_Bool enable_fan</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fan enable flag: true=enabled, false=disabled (duty=0) </p>

</div>
</div>
<a id="ga97373b7916d388eb61d634014e054dea" name="ga97373b7916d388eb61d634014e054dea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga97373b7916d388eb61d634014e054dea">&#9670;&#160;</a></span>flgUpdate</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t flgUpdate</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update flag: 1 when period elapsed, 0 otherwise </p>

</div>
</div>
<a id="gad6f773814f8d2292f2b6db7edced4e17" name="gad6f773814f8d2292f2b6db7edced4e17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad6f773814f8d2292f2b6db7edced4e17">&#9670;&#160;</a></span>g_fan_control</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_s___f_a_n.html">S_FAN</a> g_fan_control</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global variables exported by Peripheral module. </p>
<p>Fan control state structure</p>
<p>Fan control state (all disabled initially) </p>

</div>
</div>
<a id="ga1267db926f876e7725598ea9ee6bb954" name="ga1267db926f876e7725598ea9ee6bb954"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1267db926f876e7725598ea9ee6bb954">&#9670;&#160;</a></span>g_fan_ctrl</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_s___fan___update_type_def.html">S_Fan_UpdateTypeDef</a> g_fan_ctrl</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Include required header files. </p>
<p>Fan update control instance</p>
<p>Global variables with module-wide scope. Fan update control instance </p>

</div>
</div>
<a id="ga81b43df06332b4fef558297592bb7ff1" name="ga81b43df06332b4fef558297592bb7ff1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga81b43df06332b4fef558297592bb7ff1">&#9670;&#160;</a></span>period</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t period</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update period in sampling ticks (100000 = 10s @ 10kHz) </p>

</div>
</div>
<a id="ga0bd23f557562b62db3421f6d79641289" name="ga0bd23f557562b62db3421f6d79641289"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0bd23f557562b62db3421f6d79641289">&#9670;&#160;</a></span>request_high_temp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_Bool request_high_temp</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Temperature requests high power: true if temp &lt; TEMP_THRESHOLD_HIGH </p>

</div>
</div>
<a id="ga09ad34144e86c2ed9ac2061318320f10" name="ga09ad34144e86c2ed9ac2061318320f10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga09ad34144e86c2ed9ac2061318320f10">&#9670;&#160;</a></span>request_high_voltage</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_Bool request_high_voltage</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Voltage requests high power: true if VAC &lt; VAC_THRESHOLD_HIGH </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
