<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LadyBug Firmware Documentation: ADC Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LadyBug Firmware Documentation<span id="projectnumber">&#160;v2.1</span>
   </div>
   <div id="projectbrief">Update data according main board hardware ver2.1</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group___d_r_v___a_d_c.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">ADC Driver <div class="ingroups"><a class="el" href="group___d_r_i_v_e_r___l_a_y_e_r.html">Driver Layer</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>ADC driver for hardware interfacing and data acquisition.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for ADC Driver:</div>
<div class="dyncontent">
<div class="center"><img src="group___d_r_v___a_d_c.png" border="0" usemap="#agroup______d__r__v______a__d__c" loading="lazy" alt=""/></div>
<map name="agroup______d__r__v______a__d__c" id="agroup______d__r__v______a__d__c">
<area shape="rect" href="group___d_r_i_v_e_r___l_a_y_e_r.html" title="Hardware abstraction and low&#45;level peripheral drivers." alt="" coords="5,5,98,32"/>
<area shape="rect" title="ADC driver for hardware interfacing and data acquisition." alt="" coords="146,5,235,32"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:S_5FAdc_5FData_5FTypeDef" id="r_S_5FAdc_5FData_5FTypeDef"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_s___adc___data___type_def.html">S_Adc_Data_TypeDef</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Public macro definitions.  <a href="struct_s___adc___data___type_def.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab85cb16e003e34435b1bba7bfecbb5b9" id="r_gab85cb16e003e34435b1bba7bfecbb5b9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab85cb16e003e34435b1bba7bfecbb5b9">adc_init_</a> (<a class="el" href="struct_s___adc___data___type_def.html">S_Adc_Data_TypeDef</a> *pADC)</td></tr>
<tr class="memdesc:gab85cb16e003e34435b1bba7bfecbb5b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize ADC module.  <br /></td></tr>
<tr class="memitem:gad85cb208269700f968f1441beb35bf8a" id="r_gad85cb208269700f968f1441beb35bf8a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad85cb208269700f968f1441beb35bf8a">adc_start_conversion_</a> (<a class="el" href="struct_s___adc___data___type_def.html">S_Adc_Data_TypeDef</a> *pADC)</td></tr>
<tr class="memdesc:gad85cb208269700f968f1441beb35bf8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start ADC conversion using DMA mode.  <br /></td></tr>
<tr class="memitem:ga5bff6d15fc0bf77d4b07f54700f4c434" id="r_ga5bff6d15fc0bf77d4b07f54700f4c434"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5bff6d15fc0bf77d4b07f54700f4c434">adc_get_result_</a> (<a class="el" href="struct_s___adc___data___type_def.html">S_Adc_Data_TypeDef</a> *pADC)</td></tr>
<tr class="memdesc:ga5bff6d15fc0bf77d4b07f54700f4c434"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read and process ADC conversion results.  <br /></td></tr>
<tr class="memitem:ga16393acb40aae65ca9e14eb2444f55c5" id="r_ga16393acb40aae65ca9e14eb2444f55c5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga16393acb40aae65ca9e14eb2444f55c5">adc_calibrate_</a> (<a class="el" href="struct_s___adc___data___type_def.html">S_Adc_Data_TypeDef</a> *pADC)</td></tr>
<tr class="memdesc:ga16393acb40aae65ca9e14eb2444f55c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform ADC calibration.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga22b804736f5648d52f639b2647d4ed13" id="r_ga22b804736f5648d52f639b2647d4ed13"><td class="memItemLeft" align="right" valign="top">ADC_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga22b804736f5648d52f639b2647d4ed13">hadc1</a></td></tr>
<tr class="memdesc:ga22b804736f5648d52f639b2647d4ed13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extern global variables for ADC module.  <br /></td></tr>
<tr class="memitem:ga26caa0d775f89d63143e0f475564a166" id="r_ga26caa0d775f89d63143e0f475564a166"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_s___adc___data___type_def.html">S_Adc_Data_TypeDef</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga26caa0d775f89d63143e0f475564a166">g_adc_data_</a></td></tr>
<tr class="memdesc:ga26caa0d775f89d63143e0f475564a166"><td class="mdescLeft">&#160;</td><td class="mdescRight">Include public and private headers.  <br /></td></tr>
<tr class="memitem:gaf0d2ffa00bdaf3b3b36ecb283f8a5b55" id="r_gaf0d2ffa00bdaf3b3b36ecb283f8a5b55"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf0d2ffa00bdaf3b3b36ecb283f8a5b55">buffer_adc</a> [6]</td></tr>
<tr class="memitem:ga6e4486ef0554e48702f9095253afcc72" id="r_ga6e4486ef0554e48702f9095253afcc72"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6e4486ef0554e48702f9095253afcc72">ADC_vac</a></td></tr>
<tr class="memitem:ga7cf0add5681cddfb5760a8076fb9cbce" id="r_ga7cf0add5681cddfb5760a8076fb9cbce"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7cf0add5681cddfb5760a8076fb9cbce">ADC_thermal_pfc</a></td></tr>
<tr class="memitem:gacc3f3f60ba83b8809b768dc85180b71c" id="r_gacc3f3f60ba83b8809b768dc85180b71c"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacc3f3f60ba83b8809b768dc85180b71c">ADC_thermal_llc</a></td></tr>
<tr class="memitem:ga5f46e99a879143174e4d1f013ad9d34c" id="r_ga5f46e99a879143174e4d1f013ad9d34c"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5f46e99a879143174e4d1f013ad9d34c">ADC_current_bat</a></td></tr>
<tr class="memitem:ga0f44518e6b76a378568af6bbc365bb2a" id="r_ga0f44518e6b76a378568af6bbc365bb2a"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0f44518e6b76a378568af6bbc365bb2a">ADC_voltage_bat</a></td></tr>
<tr class="memitem:ga942b5893c1e875c5f1a0b7350f16c7b5" id="r_ga942b5893c1e875c5f1a0b7350f16c7b5"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga942b5893c1e875c5f1a0b7350f16c7b5">ADC_voltage_out</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-member-group" class="groupheader"><a id="member-group" name="member-group"></a>
ADC Configuration</h2></td></tr>
<tr><td class="ititle" colspan="2"><p>Include required header files.</p>
<p>Public constant definitions for ADC module. </p>
</td></tr>
<tr class="memitem:ga6da6732b91372cf0e9585a30f607484a" id="r_ga6da6732b91372cf0e9585a30f607484a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6da6732b91372cf0e9585a30f607484a">hadc</a>&#160;&#160;&#160;<a class="el" href="#ga22b804736f5648d52f639b2647d4ed13">hadc1</a></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p>ADC driver for hardware interfacing and data acquisition. </p>
<p>This file implements the initialization and main process logic of the ADC Driver module. It provides the core functions for ADC operation, calibration, DMA-based conversion control, and data retrieval for multiple measurement channels including VAC, thermal sensors, battery measurements, and output voltage monitoring.</p>
<dl class="section version"><dt>Version</dt><dd>1.0.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>May 30, 2025 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>EVSELab Co. Jsc.</dd></dl>
<p>This module provides functions for ADC initialization, calibration, conversion control, and result retrieval. It manages DMA-based ADC operations for multiple channels including VAC, thermal sensors, battery current, battery voltage, and output voltage measurements.</p>
<dl class="section version"><dt>Version</dt><dd>1.0.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>May 30, 2025 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>EVSELab Co. Jsc. </dd></dl>
<a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="ga6da6732b91372cf0e9585a30f607484a" name="ga6da6732b91372cf0e9585a30f607484a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6da6732b91372cf0e9585a30f607484a">&#9670;&#160;</a></span>hadc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define hadc&#160;&#160;&#160;<a class="el" href="#ga22b804736f5648d52f639b2647d4ed13">hadc1</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ga16393acb40aae65ca9e14eb2444f55c5" name="ga16393acb40aae65ca9e14eb2444f55c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga16393acb40aae65ca9e14eb2444f55c5">&#9670;&#160;</a></span>adc_calibrate_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int adc_calibrate_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s___adc___data___type_def.html">S_Adc_Data_TypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>pADC</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform ADC calibration. </p>
<p>Executes ADC calibration routine to improve measurement accuracy by compensating for offset and gain errors.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pADC</td><td>Pointer to <a class="el" href="struct_s___adc___data___type_def.html" title="Public macro definitions.">S_Adc_Data_TypeDef</a> structure (reserved for future use).</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>Calibration completed successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Invalid parameter (NULL pointer) or HAL error.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function is automatically called during <a class="el" href="#gab85cb16e003e34435b1bba7bfecbb5b9" title="Initialize ADC module.">adc_init_()</a>. It can be called separately if recalibration is needed. Checks for null pointer and HAL status.</dd></dl>
<p>Executes ADC calibration routine to improve measurement accuracy by compensating for offset and gain errors. The calibration process is specific to the STM32G0 ADC peripheral and should be performed before starting conversions or when ambient conditions change significantly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pADC</td><td>Pointer to <a class="el" href="struct_s___adc___data___type_def.html" title="Public macro definitions.">S_Adc_Data_TypeDef</a> structure (reserved for future use, currently not used by implementation).</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>Calibration completed successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Invalid parameter (NULL pointer) or HAL error.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function is automatically called during <a class="el" href="#gab85cb16e003e34435b1bba7bfecbb5b9" title="Initialize ADC module.">adc_init_()</a>. It can be called separately if recalibration is needed during runtime. Checks for null pointer and HAL status. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___d_r_v___a_d_c_ga16393acb40aae65ca9e14eb2444f55c5_icgraph.png" border="0" usemap="#agroup___d_r_v___a_d_c_ga16393acb40aae65ca9e14eb2444f55c5_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___d_r_v___a_d_c_ga16393acb40aae65ca9e14eb2444f55c5_icgraph" id="agroup___d_r_v___a_d_c_ga16393acb40aae65ca9e14eb2444f55c5_icgraph">
<area shape="rect" title="Perform ADC calibration." alt="" coords="434,5,540,32"/>
<area shape="rect" href="group___d_r_v___a_d_c.html#gab85cb16e003e34435b1bba7bfecbb5b9" title="Initialize ADC module." alt="" coords="313,5,386,32"/>
<area shape="poly" title=" " alt="" coords="419,21,387,21,387,16,419,16"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#ga92575d106e9621cd83364e7921c16842" title="Global function implementations." alt="" coords="103,5,265,32"/>
<area shape="poly" title=" " alt="" coords="297,21,265,21,265,16,297,16"/>
<area shape="rect" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,5,55,32"/>
<area shape="poly" title=" " alt="" coords="87,21,55,21,55,16,87,16"/>
</map>
</div>

</div>
</div>
<a id="ga5bff6d15fc0bf77d4b07f54700f4c434" name="ga5bff6d15fc0bf77d4b07f54700f4c434"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5bff6d15fc0bf77d4b07f54700f4c434">&#9670;&#160;</a></span>adc_get_result_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int adc_get_result_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s___adc___data___type_def.html">S_Adc_Data_TypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>pADC</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read and process ADC conversion results. </p>
<p>Copies raw ADC values from DMA buffer to individual measurement fields for easy access to each channel's data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pADC</td><td>Pointer to <a class="el" href="struct_s___adc___data___type_def.html" title="Public macro definitions.">S_Adc_Data_TypeDef</a> structure that holds both raw buffer and processed ADC values.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>Results retrieved successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Invalid parameter (NULL pointer).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Should be called after ADC conversion is complete to update all measurement values. This function checks for null pointer.</dd></dl>
<p>Copies raw ADC values from DMA buffer to individual measurement fields for easy access to each channel's data. Maps buffer indices to corresponding measurement parameters:</p><ul>
<li>buffer_adc[0] → ADC_vac (AC voltage)</li>
<li>buffer_adc[1] → ADC_thermal_pfc (PFC thermal)</li>
<li>buffer_adc[2] → ADC_thermal_llc (LLC thermal)</li>
<li>buffer_adc[3] → ADC_current_bat (Battery current)</li>
<li>buffer_adc[4] → ADC_voltage_out (Output voltage)</li>
<li>buffer_adc[5] → ADC_voltage_bat (Battery voltage)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pADC</td><td>Pointer to <a class="el" href="struct_s___adc___data___type_def.html" title="Public macro definitions.">S_Adc_Data_TypeDef</a> structure that holds both raw buffer and processed ADC measurement values.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>Results retrieved and processed successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Invalid parameter (NULL pointer).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Should be called after ADC conversion is complete to update all measurement values. This function checks for null pointer. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___d_r_v___a_d_c_ga5bff6d15fc0bf77d4b07f54700f4c434_icgraph.png" border="0" usemap="#agroup___d_r_v___a_d_c_ga5bff6d15fc0bf77d4b07f54700f4c434_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___d_r_v___a_d_c_ga5bff6d15fc0bf77d4b07f54700f4c434_icgraph" id="agroup___d_r_v___a_d_c_ga5bff6d15fc0bf77d4b07f54700f4c434_icgraph">
<area shape="rect" title="Read and process ADC conversion results." alt="" coords="567,5,681,32"/>
<area shape="rect" href="group___m_i_d___m_e_a_s_u_r_e_m_e_n_t.html#ga7ec30b7794b47ae2138c478f132022d2" title="Update all measurements in Q15 format." alt="" coords="365,5,519,32"/>
<area shape="poly" title=" " alt="" coords="552,21,520,21,520,16,552,16"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#ga45b2b0ff3f21c7abe00874a5057a0efd" title="Main interrupt service routine for real&#45;time control." alt="" coords="142,5,317,32"/>
<area shape="poly" title=" " alt="" coords="349,21,317,21,317,16,349,16"/>
<area shape="rect" href="main_8c.html#a4665d4e1d5fea2d34089d4e50a763751" title=" " alt="" coords="5,5,94,32"/>
<area shape="poly" title=" " alt="" coords="126,21,94,21,94,16,126,16"/>
</map>
</div>

</div>
</div>
<a id="gab85cb16e003e34435b1bba7bfecbb5b9" name="gab85cb16e003e34435b1bba7bfecbb5b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab85cb16e003e34435b1bba7bfecbb5b9">&#9670;&#160;</a></span>adc_init_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int adc_init_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s___adc___data___type_def.html">S_Adc_Data_TypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>pADC</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize ADC module. </p>
<p>Initializes the ADC structure by resetting all ADC-related values, performs calibration, and starts DMA conversion.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pADC</td><td>Pointer to <a class="el" href="struct_s___adc___data___type_def.html" title="Public macro definitions.">S_Adc_Data_TypeDef</a> structure containing ADC configuration and data buffers.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>Initialization completed successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Invalid parameter (NULL pointer) or HAL error.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function must be called once during system startup before using any other ADC functions. It checks for null pointer and initializes all buffer elements to zero.</dd></dl>
<p>This function performs initial setup for ADC Driver module:</p><ul>
<li>Reset internal counters and buffer values to zero</li>
<li>Configure ADC hardware via calibration</li>
<li>Start DMA-based continuous conversion The function initializes all 6 ADC channels (VAC, thermal sensors, battery current/voltage, and output voltage).</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pADC</td><td>Pointer to <a class="el" href="struct_s___adc___data___type_def.html" title="Public macro definitions.">S_Adc_Data_TypeDef</a> structure containing ADC configuration and data buffers.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>Initialization completed successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Invalid parameter (NULL pointer) or hardware error.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Must be called once during system startup before using any other ADC functions. Checks for null pointer and initializes all buffer elements to zero. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___d_r_v___a_d_c_gab85cb16e003e34435b1bba7bfecbb5b9_cgraph.png" border="0" usemap="#agroup___d_r_v___a_d_c_gab85cb16e003e34435b1bba7bfecbb5b9_cgraph" loading="lazy" alt=""/></div>
<map name="agroup___d_r_v___a_d_c_gab85cb16e003e34435b1bba7bfecbb5b9_cgraph" id="agroup___d_r_v___a_d_c_gab85cb16e003e34435b1bba7bfecbb5b9_cgraph">
<area shape="rect" title="Initialize ADC module." alt="" coords="5,31,79,57"/>
<area shape="rect" href="group___d_r_v___a_d_c.html#ga16393acb40aae65ca9e14eb2444f55c5" title="Perform ADC calibration." alt="" coords="150,5,256,32"/>
<area shape="poly" title=" " alt="" coords="79,36,134,27,135,32,80,41"/>
<area shape="rect" href="group___d_r_v___a_d_c.html#gad85cb208269700f968f1441beb35bf8a" title="Start ADC conversion using DMA mode." alt="" coords="127,56,279,83"/>
<area shape="poly" title=" " alt="" coords="80,47,112,52,111,58,79,52"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___d_r_v___a_d_c_gab85cb16e003e34435b1bba7bfecbb5b9_icgraph.png" border="0" usemap="#agroup___d_r_v___a_d_c_gab85cb16e003e34435b1bba7bfecbb5b9_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___d_r_v___a_d_c_gab85cb16e003e34435b1bba7bfecbb5b9_icgraph" id="agroup___d_r_v___a_d_c_gab85cb16e003e34435b1bba7bfecbb5b9_icgraph">
<area shape="rect" title="Initialize ADC module." alt="" coords="313,5,386,32"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#ga92575d106e9621cd83364e7921c16842" title="Global function implementations." alt="" coords="103,5,265,32"/>
<area shape="poly" title=" " alt="" coords="297,21,265,21,265,16,297,16"/>
<area shape="rect" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,5,55,32"/>
<area shape="poly" title=" " alt="" coords="87,21,55,21,55,16,87,16"/>
</map>
</div>

</div>
</div>
<a id="gad85cb208269700f968f1441beb35bf8a" name="gad85cb208269700f968f1441beb35bf8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad85cb208269700f968f1441beb35bf8a">&#9670;&#160;</a></span>adc_start_conversion_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int adc_start_conversion_ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_s___adc___data___type_def.html">S_Adc_Data_TypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>pADC</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start ADC conversion using DMA mode. </p>
<p>Initiates continuous ADC conversion with DMA for all configured channels. Results are automatically stored in the buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pADC</td><td>Pointer to <a class="el" href="struct_s___adc___data___type_def.html" title="Public macro definitions.">S_Adc_Data_TypeDef</a> structure where ADC buffer will be stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>Conversion started successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Invalid parameter (NULL pointer) or HAL error.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The DMA buffer must be properly configured before calling this function. This function checks for null pointer and HAL status.</dd></dl>
<p>Initiates continuous ADC conversion with DMA for all configured channels (VAC, thermal sensors, battery measurements, output voltage). Conversion results are automatically stored in the DMA buffer by hardware without CPU intervention.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pADC</td><td>Pointer to <a class="el" href="struct_s___adc___data___type_def.html" title="Public macro definitions.">S_Adc_Data_TypeDef</a> structure where ADC buffer will be stored via DMA transfers.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SUCCESS</td><td>DMA conversion started successfully. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Invalid parameter (NULL pointer) or HAL error.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The DMA buffer must be properly configured in the ADC structure before calling this function. This function checks for null pointer and HAL status. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___d_r_v___a_d_c_gad85cb208269700f968f1441beb35bf8a_icgraph.png" border="0" usemap="#agroup___d_r_v___a_d_c_gad85cb208269700f968f1441beb35bf8a_icgraph" loading="lazy" alt=""/></div>
<map name="agroup___d_r_v___a_d_c_gad85cb208269700f968f1441beb35bf8a_icgraph" id="agroup___d_r_v___a_d_c_gad85cb208269700f968f1441beb35bf8a_icgraph">
<area shape="rect" title="Start ADC conversion using DMA mode." alt="" coords="434,5,587,32"/>
<area shape="rect" href="group___d_r_v___a_d_c.html#gab85cb16e003e34435b1bba7bfecbb5b9" title="Initialize ADC module." alt="" coords="313,5,386,32"/>
<area shape="poly" title=" " alt="" coords="418,21,387,21,387,16,418,16"/>
<area shape="rect" href="group___a_p_p___l_a_d_y_b_u_g.html#ga92575d106e9621cd83364e7921c16842" title="Global function implementations." alt="" coords="103,5,265,32"/>
<area shape="poly" title=" " alt="" coords="297,21,265,21,265,16,297,16"/>
<area shape="rect" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,5,55,32"/>
<area shape="poly" title=" " alt="" coords="87,21,55,21,55,16,87,16"/>
</map>
</div>

</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="ga5f46e99a879143174e4d1f013ad9d34c" name="ga5f46e99a879143174e4d1f013ad9d34c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5f46e99a879143174e4d1f013ad9d34c">&#9670;&#160;</a></span>ADC_current_bat</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ADC_current_bat</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Battery current measurement value </p>

</div>
</div>
<a id="gacc3f3f60ba83b8809b768dc85180b71c" name="gacc3f3f60ba83b8809b768dc85180b71c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc3f3f60ba83b8809b768dc85180b71c">&#9670;&#160;</a></span>ADC_thermal_llc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ADC_thermal_llc</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>LLC thermal sensor reading </p>

</div>
</div>
<a id="ga7cf0add5681cddfb5760a8076fb9cbce" name="ga7cf0add5681cddfb5760a8076fb9cbce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7cf0add5681cddfb5760a8076fb9cbce">&#9670;&#160;</a></span>ADC_thermal_pfc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ADC_thermal_pfc</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>PFC thermal sensor reading </p>

</div>
</div>
<a id="ga6e4486ef0554e48702f9095253afcc72" name="ga6e4486ef0554e48702f9095253afcc72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e4486ef0554e48702f9095253afcc72">&#9670;&#160;</a></span>ADC_vac</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ADC_vac</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>AC voltage measurement value </p>

</div>
</div>
<a id="ga0f44518e6b76a378568af6bbc365bb2a" name="ga0f44518e6b76a378568af6bbc365bb2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0f44518e6b76a378568af6bbc365bb2a">&#9670;&#160;</a></span>ADC_voltage_bat</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ADC_voltage_bat</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Battery voltage measurement value </p>

</div>
</div>
<a id="ga942b5893c1e875c5f1a0b7350f16c7b5" name="ga942b5893c1e875c5f1a0b7350f16c7b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga942b5893c1e875c5f1a0b7350f16c7b5">&#9670;&#160;</a></span>ADC_voltage_out</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ADC_voltage_out</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Output voltage measurement value </p>

</div>
</div>
<a id="gaf0d2ffa00bdaf3b3b36ecb283f8a5b55" name="gaf0d2ffa00bdaf3b3b36ecb283f8a5b55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf0d2ffa00bdaf3b3b36ecb283f8a5b55">&#9670;&#160;</a></span>buffer_adc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t buffer_adc[6]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DMA buffer holding raw ADC values for all channels [0-5] </p>

</div>
</div>
<a id="ga26caa0d775f89d63143e0f475564a166" name="ga26caa0d775f89d63143e0f475564a166"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga26caa0d775f89d63143e0f475564a166">&#9670;&#160;</a></span>g_adc_data_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_s___adc___data___type_def.html">S_Adc_Data_TypeDef</a> g_adc_data_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Include public and private headers. </p>
<p>Local constant definitions. </p><dl class="section note"><dt>Note</dt><dd>Use prefix K_ for constants.</dd></dl>
<p>Local macro definitions. </p><dl class="section note"><dt>Note</dt><dd>Use prefix M_ for macros.</dd></dl>
<p>Private data types and enumerations.</p>
<p>Static helper function prototypes. </p><dl class="section note"><dt>Note</dt><dd>Functions declared here must be defined as static.</dd></dl>
<p>Module-scope variables. </p><dl class="section note"><dt>Note</dt><dd>Use prefix g_ for global module-level variables. </dd></dl>

</div>
</div>
<a id="ga22b804736f5648d52f639b2647d4ed13" name="ga22b804736f5648d52f639b2647d4ed13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga22b804736f5648d52f639b2647d4ed13">&#9670;&#160;</a></span>hadc1</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ADC_HandleTypeDef hadc1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extern global variables for ADC module. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
